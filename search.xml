<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>6-03-使用Ribbon实现负载均衡</title>
    <url>/2020/05/07/6-03-%E4%BD%BF%E7%94%A8Ribbon%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h4 id="1-项目目录"><a href="#1-项目目录" class="headerlink" title="1. 项目目录"></a>1. 项目目录</h4><p><img src="/2020/05/07/6-03-%E4%BD%BF%E7%94%A8Ribbon%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/image-20210305172711430.png" alt="image-20210305172711430"></p>
<h4 id="2-加注释"><a href="#2-加注释" class="headerlink" title="2. 加注释"></a>2. 加注释</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.cloud.client.loadbalancer.LoadBalanced;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.web.client.RestTemplate;</span><br><span class="line">import tk.mybatis.spring.annotation.MapperScan;</span><br><span class="line"></span><br><span class="line">@MapperScan(&quot;com.zql&quot;)</span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class ContentCenterApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        SpringApplication.run(ContentCenterApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    @LoadBalanced</span><br><span class="line">    public RestTemplate restTemplate() &#123;</span><br><span class="line"></span><br><span class="line">        return new RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="3-修改代码"><a href="#3-修改代码" class="headerlink" title="3. 修改代码"></a>3. 修改代码</h4><p><strong>原始代码</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter.service;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.zql.contentCenter.dao.content.ShareMapper;</span><br><span class="line">import com.zql.contentCenter.domain.dto.content.ShareDTO;</span><br><span class="line">import com.zql.contentCenter.domain.dto.user.UserDTO;</span><br><span class="line">import com.zql.contentCenter.domain.entity.content.Share;</span><br><span class="line">import org.springframework.beans.BeanUtils;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.cloud.client.ServiceInstance;</span><br><span class="line">import org.springframework.cloud.client.discovery.DiscoveryClient;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line">import org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line">import java.net.URI;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Optional;</span><br><span class="line">import java.util.concurrent.ThreadLocalRandom;</span><br><span class="line">import java.util.stream.Collector;</span><br><span class="line">import java.util.stream.Collectors;</span><br><span class="line">import java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class ShareService &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private ShareMapper shareMapper;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private DiscoveryClient discoveryClient;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    public ShareDTO getById(Integer id) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Share share &#x3D; shareMapper.selectByPrimaryKey(id);</span><br><span class="line"></span><br><span class="line">        List&lt;ServiceInstance&gt; instances &#x3D; discoveryClient.getInstances(&quot;user-center&quot;);</span><br><span class="line">        List&lt;String&gt; urlList &#x3D; instances.stream().map(instance -&gt; instance.getUri().toString() + &quot;&#x2F;user&#x2F;&#123;id&#125;&quot;).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        int i &#x3D; ThreadLocalRandom.current().nextInt(urlList.size());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        UserDTO userDTO &#x3D; restTemplate.getForObject(urlList.get(i), UserDTO.class, id);</span><br><span class="line"></span><br><span class="line">        ShareDTO shareDTO &#x3D; new ShareDTO();</span><br><span class="line"></span><br><span class="line">        BeanUtils.copyProperties(share,shareDTO);</span><br><span class="line">        shareDTO.setUserDTO(userDTO);</span><br><span class="line"></span><br><span class="line">        return shareDTO;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>修改后代码</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter.service;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.zql.contentCenter.dao.content.ShareMapper;</span><br><span class="line">import com.zql.contentCenter.domain.dto.content.ShareDTO;</span><br><span class="line">import com.zql.contentCenter.domain.dto.user.UserDTO;</span><br><span class="line">import com.zql.contentCenter.domain.entity.content.Share;</span><br><span class="line">import org.springframework.beans.BeanUtils;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.cloud.client.ServiceInstance;</span><br><span class="line">import org.springframework.cloud.client.discovery.DiscoveryClient;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line">import org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line">import java.net.URI;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Optional;</span><br><span class="line">import java.util.concurrent.ThreadLocalRandom;</span><br><span class="line">import java.util.stream.Collector;</span><br><span class="line">import java.util.stream.Collectors;</span><br><span class="line">import java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class ShareService &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private ShareMapper shareMapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    public ShareDTO getById(Integer id) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Share share &#x3D; shareMapper.selectByPrimaryKey(id);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        UserDTO userDTO &#x3D; restTemplate.getForObject(&quot;http:&#x2F;&#x2F;user-center&#x2F;user&#x2F;&#123;id&#125;&quot;, UserDTO.class, id);</span><br><span class="line"></span><br><span class="line">        ShareDTO shareDTO &#x3D; new ShareDTO();</span><br><span class="line"></span><br><span class="line">        BeanUtils.copyProperties(share,shareDTO);</span><br><span class="line">        shareDTO.setUserDTO(userDTO);</span><br><span class="line"></span><br><span class="line">        return shareDTO;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-04-Ribbon组成</title>
    <url>/2020/05/07/6-04-Ribbon%E7%BB%84%E6%88%90/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<p><img src="/2020/05/07/6-04-Ribbon%E7%BB%84%E6%88%90/image-20210303223737785.png" alt="image-20210303223737785"></p>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-05-配置负载均衡规则</title>
    <url>/2020/05/07/6-05-%E9%85%8D%E7%BD%AE%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%A7%84%E5%88%99/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="规则类型"><a href="#规则类型" class="headerlink" title="规则类型"></a>规则类型</h2><p><img src="/2020/05/07/6-05-%E9%85%8D%E7%BD%AE%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%A7%84%E5%88%99/image-20210303224123478.png" alt="image-20210303224123478"></p>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-08-细粒度配置自定义03-配置属性方式</title>
    <url>/2020/05/07/6-08-%E7%BB%86%E7%B2%92%E5%BA%A6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%8903-%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h4 id="1-项目目录"><a href="#1-项目目录" class="headerlink" title="1.项目目录"></a>1.项目目录</h4><p><img src="/2020/05/07/6-08-%E7%BB%86%E7%B2%92%E5%BA%A6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%8903-%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E6%96%B9%E5%BC%8F/image-20210305174127977.png" alt="image-20210305174127977"></p>
<h4 id="2-配置文件修改"><a href="#2-配置文件修改" class="headerlink" title="2. 配置文件修改"></a>2. 配置文件修改</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;haike.myds.me:13911&#x2F;content_center</span><br><span class="line">    hikari:</span><br><span class="line">      username: root</span><br><span class="line">      password: root</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: haike.myds.me:13916</span><br><span class="line">#        cluster-name: NJ</span><br><span class="line"> #        namespace: 46a69d7c-b8e4-4fa2-b906-a4cc49362120</span><br><span class="line">  application:</span><br><span class="line">    name: content-center</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: 9020</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user-cneter:</span><br><span class="line">  ribbon:</span><br><span class="line">    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule</span><br></pre></td></tr></table></figure>







]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-09-细粒度配置自定义04-两种方式对比</title>
    <url>/2020/05/07/6-09-%E7%BB%86%E7%B2%92%E5%BA%A6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%8904-%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<p><img src="/2020/05/07/6-09-%E7%BB%86%E7%B2%92%E5%BA%A6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%8904-%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94/image-20210303232342844.png" alt="image-20210303232342844"></p>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-06-细粒度配置自定义01-java代码方式</title>
    <url>/2020/05/07/6-06-%E7%BB%86%E7%B2%92%E5%BA%A6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%8901-java%E4%BB%A3%E7%A0%81%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h4 id="1-项目目录"><a href="#1-项目目录" class="headerlink" title="1. 项目目录"></a>1. 项目目录</h4><p><img src="/2020/05/07/6-06-%E7%BB%86%E7%B2%92%E5%BA%A6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%8901-java%E4%BB%A3%E7%A0%81%E6%96%B9%E5%BC%8F/image-20210305173510732.png" alt="image-20210305173510732"></p>
<h4 id="2-创建Ribbon配置类"><a href="#2-创建Ribbon配置类" class="headerlink" title="2. 创建Ribbon配置类"></a>2. 创建Ribbon配置类</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package ribbonconfiguration;</span><br><span class="line"></span><br><span class="line">import com.netflix.loadbalancer.IRule;</span><br><span class="line">import com.netflix.loadbalancer.RandomRule;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public class RibbonConfiguration &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public IRule ribbonRule() &#123;</span><br><span class="line"></span><br><span class="line">        return new RandomRule();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="2-创建user-center-Ribbon配置类"><a href="#2-创建user-center-Ribbon配置类" class="headerlink" title="2. 创建user-center Ribbon配置类"></a>2. 创建user-center Ribbon配置类</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter.configuration;</span><br><span class="line"></span><br><span class="line">import org.springframework.cloud.netflix.ribbon.RibbonClient;</span><br><span class="line">import ribbonconfiguration.RibbonConfiguration;</span><br><span class="line"></span><br><span class="line">@RibbonClient(name &#x3D; &quot;user-center&quot;,configuration &#x3D; RibbonConfiguration.class)</span><br><span class="line">public class UserCenterRibbonConfiguration &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-13-饥饿加载</title>
    <url>/2020/05/07/6-13-%E9%A5%A5%E9%A5%BF%E5%8A%A0%E8%BD%BD/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>





]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-11-全局配置</title>
    <url>/2020/05/07/6-11-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h4 id="1-项目目录"><a href="#1-项目目录" class="headerlink" title="1. 项目目录"></a>1. 项目目录</h4><p><img src="/2020/05/07/6-11-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE/image-20210305175507490.png" alt="image-20210305175507490"></p>
<h4 id="2-修改配置类UserCenterRibbonConfiguration"><a href="#2-修改配置类UserCenterRibbonConfiguration" class="headerlink" title="2. 修改配置类UserCenterRibbonConfiguration"></a>2. 修改配置类UserCenterRibbonConfiguration</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter.configuration;</span><br><span class="line"></span><br><span class="line">import org.springframework.cloud.netflix.ribbon.RibbonClient;</span><br><span class="line">import org.springframework.cloud.netflix.ribbon.RibbonClients;</span><br><span class="line">import ribbonconfiguration.RibbonConfiguration;</span><br><span class="line"></span><br><span class="line">@RibbonClients(defaultConfiguration &#x3D; RibbonConfiguration.class)</span><br><span class="line">public class UserCenterRibbonConfiguration &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-12-支持的配置项</title>
    <url>/2020/05/07/6-12-%E6%94%AF%E6%8C%81%E7%9A%84%E9%85%8D%E7%BD%AE%E9%A1%B9/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>





]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-15-扩展Ribbon-同一集群优先调用</title>
    <url>/2020/05/07/6-15-%E6%89%A9%E5%B1%95Ribbon-%E5%90%8C%E4%B8%80%E9%9B%86%E7%BE%A4%E4%BC%98%E5%85%88%E8%B0%83%E7%94%A8/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-文件目录"><a href="#1-文件目录" class="headerlink" title="1. 文件目录"></a>1. 文件目录</h2><p><img src="/2020/05/07/6-15-%E6%89%A9%E5%B1%95Ribbon-%E5%90%8C%E4%B8%80%E9%9B%86%E7%BE%A4%E4%BC%98%E5%85%88%E8%B0%83%E7%94%A8/image-20210304232152791.png" alt="image-20210304232152791"></p>
<h2 id="2-添加配置文件NacosSameClusterWeightedRule"><a href="#2-添加配置文件NacosSameClusterWeightedRule" class="headerlink" title="2. 添加配置文件NacosSameClusterWeightedRule"></a>2. 添加配置文件NacosSameClusterWeightedRule</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zql.contentCenter.configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.nacos.api.exception.NacosException;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.nacos.api.naming.NamingService;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.nacos.api.naming.pojo.Instance;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.nacos.client.naming.core.Balancer;</span><br><span class="line"><span class="keyword">import</span> com.netflix.client.config.IClientConfig;</span><br><span class="line"><span class="keyword">import</span> com.netflix.loadbalancer.AbstractLoadBalancerRule;</span><br><span class="line"><span class="keyword">import</span> com.netflix.loadbalancer.BaseLoadBalancer;</span><br><span class="line"><span class="keyword">import</span> com.netflix.loadbalancer.Server;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.alibaba.nacos.NacosDiscoveryProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.alibaba.nacos.ribbon.NacosServer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.CollectionUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NacosSameClusterWeightedRule</span> <span class="keyword">extends</span> <span class="title">AbstractLoadBalancerRule</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> NacosDiscoveryProperties nacosDiscoveryProperties;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initWithNiwsConfig</span><span class="params">(IClientConfig iClientConfig)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Server <span class="title">choose</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 找到指定服务的所有实例 A</span></span><br><span class="line">        <span class="comment">//2. 过滤出相同集群下的所有实例 B</span></span><br><span class="line">        <span class="comment">//3. 如果B是空，就用A</span></span><br><span class="line">        <span class="comment">//4. 基于权重的负载均衡</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//拿到配置文件中集群名称</span></span><br><span class="line">            String clusterName = nacosDiscoveryProperties.getClusterName();</span><br><span class="line">            BaseLoadBalancer loadBalancer = (BaseLoadBalancer) <span class="keyword">this</span>.getLoadBalancer();</span><br><span class="line">            <span class="comment">//想要请求的微服务的名称</span></span><br><span class="line">            String name = loadBalancer.getName();</span><br><span class="line">            <span class="comment">//拿到服务发现的相关API</span></span><br><span class="line">            NamingService namingService = nacosDiscoveryProperties.namingServiceInstance();</span><br><span class="line">            <span class="comment">// 1. 找到指定服务的所有实例 A</span></span><br><span class="line">            List&lt;Instance&gt; instances = namingService.selectInstances(name, <span class="keyword">true</span>);</span><br><span class="line">            <span class="comment">// 2. 过滤出相同集群下的所有实例 B</span></span><br><span class="line">            List&lt;Instance&gt; sameClusterInstances = instances.stream().filter(instance -&gt; Objects.equals(instance.getClusterName(), clusterName)).collect(Collectors.toList());</span><br><span class="line">            <span class="comment">// 3. 如果B是空，就用A</span></span><br><span class="line">            List&lt;Instance&gt; instancesToBeChosen = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">if</span> (CollectionUtils.isEmpty(sameClusterInstances)) &#123;</span><br><span class="line">                instancesToBeChosen = instances;</span><br><span class="line">                log.warn(<span class="string">&quot;发生跨集群的调用, name = &#123;&#125;, clusterName = &#123;&#125;, instances = &#123;&#125;&quot;</span>, name, clusterName, instances);</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                instancesToBeChosen = sameClusterInstances;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 4. 基于权重的负载均衡算法，返回1个实例</span></span><br><span class="line">            Instance instance = ExtendBalancer.getHostByRandomWeight2(instancesToBeChosen);</span><br><span class="line">            log.info(<span class="string">&quot;选择的实例是 port = &#123;&#125;, instance = &#123;&#125;&quot;</span>, instance.getPort(), instance);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> NacosServer(instance);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NacosException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExtendBalancer</span> <span class="keyword">extends</span> <span class="title">Balancer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Instance <span class="title">getHostByRandomWeight2</span><span class="params">(List&lt;Instance&gt; hosts)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getHostByRandomWeight(hosts);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-修改配置文件"><a href="#3-修改配置文件" class="headerlink" title="3. 修改配置文件"></a>3. 修改配置文件</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> ribbonconfiguration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.netflix.loadbalancer.IRule;</span><br><span class="line"><span class="keyword">import</span> com.netflix.loadbalancer.RandomRule;</span><br><span class="line"><span class="keyword">import</span> com.zql.contentCenter.configuration.NacosSameClusterWeightedRule;</span><br><span class="line"><span class="keyword">import</span> com.zql.contentCenter.configuration.NacosWeightedRule;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RibbonConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IRule <span class="title">ribbonRule</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//return new RandomRule();</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> NacosSameClusterWeightedRule();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-修改content-center-项目application-yml文件，更改cluster-name，启动项目"><a href="#4-修改content-center-项目application-yml文件，更改cluster-name，启动项目" class="headerlink" title="4. 修改content-center 项目application.yml文件，更改cluster-name，启动项目"></a>4. 修改content-center 项目application.yml文件，更改cluster-name，启动项目</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://haike.myds.me:13911/content_center</span></span><br><span class="line">    <span class="attr">hikari:</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">haike.myds.me:13916</span></span><br><span class="line">        <span class="comment"># 修改为NJ</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">NJ</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">46a69d7c-b8e4-4fa2-b906-a4cc49362120</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">content-center</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9020</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#user-center:</span></span><br><span class="line"><span class="comment">#  ribbon:</span></span><br><span class="line"><span class="comment">#    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="5-修改user-center-项目application-yml文件，更改cluster-name，更改端口，启动项目"><a href="#5-修改user-center-项目application-yml文件，更改cluster-name，更改端口，启动项目" class="headerlink" title="5. 修改user-center 项目application.yml文件，更改cluster-name，更改端口，启动项目"></a>5. 修改user-center 项目application.yml文件，更改cluster-name，更改端口，启动项目</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;haike.myds.me:13911&#x2F;user_center</span><br><span class="line">    hikari:</span><br><span class="line">      username: root</span><br><span class="line">      password: root</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: haike.myds.me:13916</span><br><span class="line">        cluster-name: NJ</span><br><span class="line">        namespace: 46a69d7c-b8e4-4fa2-b906-a4cc49362120</span><br><span class="line">  application:</span><br><span class="line">    name: user-center</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: 9010</span><br></pre></td></tr></table></figure>

<h2 id="6-修改user-center-项目application-yml文件，-更改cluster-name，更改端口，启动项目"><a href="#6-修改user-center-项目application-yml文件，-更改cluster-name，更改端口，启动项目" class="headerlink" title="6. 修改user-center 项目application.yml文件，,更改cluster-name，更改端口，启动项目"></a>6. 修改user-center 项目application.yml文件，,更改cluster-name，更改端口，启动项目</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;haike.myds.me:13911&#x2F;user_center</span><br><span class="line">    hikari:</span><br><span class="line">      username: root</span><br><span class="line">      password: root</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: haike.myds.me:13916</span><br><span class="line">        cluster-name: BJ</span><br><span class="line">        namespace: 46a69d7c-b8e4-4fa2-b906-a4cc49362120</span><br><span class="line">  application:</span><br><span class="line">    name: user-center</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: 9011</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="6-调用结果"><a href="#6-调用结果" class="headerlink" title="6. 调用结果"></a>6. 调用结果</h2><ul>
<li>NJ集群和BJ集群都正常，优先调用NJ机房</li>
</ul>
<p><img src="/2020/05/07/6-15-%E6%89%A9%E5%B1%95Ribbon-%E5%90%8C%E4%B8%80%E9%9B%86%E7%BE%A4%E4%BC%98%E5%85%88%E8%B0%83%E7%94%A8/image-20210304233020695.png" alt="image-20210304233020695"></p>
<p>NJ集群挂掉，BJ集群正常，改为调用BJ机房</p>
<p><img src="/2020/05/07/6-15-%E6%89%A9%E5%B1%95Ribbon-%E5%90%8C%E4%B8%80%E9%9B%86%E7%BE%A4%E4%BC%98%E5%85%88%E8%B0%83%E7%94%A8/image-20210304233217802.png" alt="image-20210304233217802"></p>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-16-扩展Ribbon-基于元数据的版本控制</title>
    <url>/2020/05/07/6-16-%E6%89%A9%E5%B1%95Ribbon-%E5%9F%BA%E4%BA%8E%E5%85%83%E6%95%B0%E6%8D%AE%E7%9A%84%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-项目目录"><a href="#1-项目目录" class="headerlink" title="1. 项目目录"></a>1. 项目目录</h2><p><img src="/2020/05/07/6-16-%E6%89%A9%E5%B1%95Ribbon-%E5%9F%BA%E4%BA%8E%E5%85%83%E6%95%B0%E6%8D%AE%E7%9A%84%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/image-20210308223026338.png" alt="image-20210308223026338"></p>
<h2 id="2-创建NacosFinalRule配置类"><a href="#2-创建NacosFinalRule配置类" class="headerlink" title="2. 创建NacosFinalRule配置类"></a>2. 创建NacosFinalRule配置类</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter.configuration;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.alibaba.nacos.api.naming.NamingService;</span><br><span class="line">import com.alibaba.nacos.api.naming.pojo.Instance;</span><br><span class="line">import com.alibaba.nacos.client.naming.utils.CollectionUtils;</span><br><span class="line">import com.alibaba.nacos.client.utils.StringUtils;</span><br><span class="line">import com.netflix.client.config.IClientConfig;</span><br><span class="line">import com.netflix.loadbalancer.AbstractLoadBalancerRule;</span><br><span class="line">import com.netflix.loadbalancer.DynamicServerListLoadBalancer;</span><br><span class="line">import com.netflix.loadbalancer.Server;</span><br><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.cloud.alibaba.nacos.NacosDiscoveryProperties;</span><br><span class="line">import org.springframework.cloud.alibaba.nacos.ribbon.NacosServer;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Objects;</span><br><span class="line">import java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line">@Slf4j</span><br><span class="line">public class NacosFinalRule extends AbstractLoadBalancerRule &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private NacosDiscoveryProperties nacosDiscoveryProperties;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void initWithNiwsConfig(IClientConfig iClientConfig) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Server choose(Object key) &#123;</span><br><span class="line">        &#x2F;&#x2F; 负载均衡规则：优先选择同集群下，符合metadata的实例</span><br><span class="line">        &#x2F;&#x2F; 如果没有，就选择所有集群下，符合metadata的实例</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 1. 查询所有实例 A</span><br><span class="line">        &#x2F;&#x2F; 2. 筛选元数据匹配的实例 B</span><br><span class="line">        &#x2F;&#x2F; 3. 筛选出同cluster下元数据匹配的实例 C</span><br><span class="line">        &#x2F;&#x2F; 4. 如果C为空，就用B</span><br><span class="line">        &#x2F;&#x2F; 5. 随机选择实例</span><br><span class="line">        try &#123;</span><br><span class="line">            String clusterName &#x3D; this.nacosDiscoveryProperties.getClusterName();</span><br><span class="line">            String targetVersion &#x3D; this.nacosDiscoveryProperties.getMetadata().get(&quot;target-version&quot;);</span><br><span class="line"></span><br><span class="line">            DynamicServerListLoadBalancer loadBalancer &#x3D; (DynamicServerListLoadBalancer) getLoadBalancer();</span><br><span class="line">            String name &#x3D; loadBalancer.getName();</span><br><span class="line"></span><br><span class="line">            NamingService namingService &#x3D; this.nacosDiscoveryProperties.namingServiceInstance();</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 所有实例</span><br><span class="line">            List&lt;Instance&gt; instances &#x3D; namingService.selectInstances(name, true);</span><br><span class="line"></span><br><span class="line">            List&lt;Instance&gt; metadataMatchInstances &#x3D; instances;</span><br><span class="line">            &#x2F;&#x2F; 如果配置了版本映射，那么只调用元数据匹配的实例</span><br><span class="line">            if (StringUtils.isNotBlank(targetVersion)) &#123;</span><br><span class="line">                metadataMatchInstances &#x3D; instances.stream()</span><br><span class="line">                        .filter(instance -&gt; Objects.equals(targetVersion, instance.getMetadata().get(&quot;version&quot;)))</span><br><span class="line">                        .collect(Collectors.toList());</span><br><span class="line">                if (CollectionUtils.isEmpty(metadataMatchInstances)) &#123;</span><br><span class="line">                    log.warn(&quot;未找到元数据匹配的目标实例！请检查配置。targetVersion &#x3D; &#123;&#125;, instance &#x3D; &#123;&#125;&quot;, targetVersion, instances);</span><br><span class="line">                    return null;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            List&lt;Instance&gt; clusterMetadataMatchInstances &#x3D; metadataMatchInstances;</span><br><span class="line">            &#x2F;&#x2F; 如果配置了集群名称，需筛选同集群下元数据匹配的实例</span><br><span class="line">            if (StringUtils.isNotBlank(clusterName)) &#123;</span><br><span class="line">                clusterMetadataMatchInstances &#x3D; metadataMatchInstances.stream()</span><br><span class="line">                        .filter(instance -&gt; Objects.equals(clusterName, instance.getClusterName()))</span><br><span class="line">                        .collect(Collectors.toList());</span><br><span class="line">                if (CollectionUtils.isEmpty(clusterMetadataMatchInstances)) &#123;</span><br><span class="line">                    clusterMetadataMatchInstances &#x3D; metadataMatchInstances;</span><br><span class="line">                    log.warn(&quot;发生跨集群调用。clusterName &#x3D; &#123;&#125;, targetVersion &#x3D; &#123;&#125;, clusterMetadataMatchInstances &#x3D; &#123;&#125;&quot;, clusterName, targetVersion, clusterMetadataMatchInstances);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Instance instance &#x3D; ExtendBalancer.getHostByRandomWeight2(clusterMetadataMatchInstances);</span><br><span class="line">            return new NacosServer(instance);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            log.warn(&quot;发生异常&quot;, e);</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="3-修改RibbonConfiguration"><a href="#3-修改RibbonConfiguration" class="headerlink" title="3. 修改RibbonConfiguration"></a>3. 修改RibbonConfiguration</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package ribbonconfiguration;</span><br><span class="line"></span><br><span class="line">import com.netflix.loadbalancer.IRule;</span><br><span class="line">import com.netflix.loadbalancer.RandomRule;</span><br><span class="line">import com.zql.contentCenter.configuration.NacosFinalRule;</span><br><span class="line">import com.zql.contentCenter.configuration.NacosSameClusterWeightedRule;</span><br><span class="line">import com.zql.contentCenter.configuration.NacosWeightedRule;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public class RibbonConfiguration &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public IRule ribbonRule() &#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;return new RandomRule();</span><br><span class="line">        return new NacosFinalRule();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-修改content-center-application-yml"><a href="#4-修改content-center-application-yml" class="headerlink" title="4. 修改content-center application.yml"></a>4. 修改content-center application.yml</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;haike.myds.me:13911&#x2F;content_center</span><br><span class="line">    hikari:</span><br><span class="line">      username: root</span><br><span class="line">      password: root</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: haike.myds.me:13916</span><br><span class="line">        # 修改为NJ</span><br><span class="line">        cluster-name: NJ</span><br><span class="line">        namespace: 46a69d7c-b8e4-4fa2-b906-a4cc49362120</span><br><span class="line">        metadata: </span><br><span class="line">          version: v1</span><br><span class="line">          target-version: v1</span><br><span class="line">  application:</span><br><span class="line">    name: content-center</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: 9020</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#user-center:</span><br><span class="line">#  ribbon:</span><br><span class="line">#    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="5-修改user-center配置文件"><a href="#5-修改user-center配置文件" class="headerlink" title="5. 修改user-center配置文件"></a>5. 修改user-center配置文件</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;haike.myds.me:13911&#x2F;user_center</span><br><span class="line">    hikari:</span><br><span class="line">      username: root</span><br><span class="line">      password: root</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: haike.myds.me:13916</span><br><span class="line">        cluster-name: BJ</span><br><span class="line">        namespace: 46a69d7c-b8e4-4fa2-b906-a4cc49362120</span><br><span class="line">      metadata:</span><br><span class="line">        version: v1</span><br><span class="line">        target-version: v1</span><br><span class="line">  application:</span><br><span class="line">    name: user-center</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: 9011</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-17-深入理解Nacos的Namespace</title>
    <url>/2020/05/07/6-17-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Nacos%E7%9A%84Namespace/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>





]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-01-使用Feign实现远程HTTP调用</title>
    <url>/2021/03/09/7-01-%E4%BD%BF%E7%94%A8Feign%E5%AE%9E%E7%8E%B0%E8%BF%9C%E7%A8%8BHTTP%E8%B0%83%E7%94%A8/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-项目结构"><a href="#1-项目结构" class="headerlink" title="1. 项目结构"></a>1. 项目结构</h2><p>![image-20210308232116890](7-01-使用Feign实现远程HTTP调用 - 副本 (3)/image-20210308232116890.png)</p>
<h2 id="2-content-center添加依赖"><a href="#2-content-center添加依赖" class="headerlink" title="2. content-center添加依赖"></a>2. content-center添加依赖</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot;</span><br><span class="line">         xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0 http:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;</span><br><span class="line"></span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.1.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;relativePath&#x2F;&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">    &lt;&#x2F;parent&gt;</span><br><span class="line"></span><br><span class="line">    &lt;groupId&gt;com.zql.user-center&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;content-center&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line"></span><br><span class="line">    &lt;name&gt;content-center&lt;&#x2F;name&gt;</span><br><span class="line">    &lt;description&gt;Demo project for Spring Boot&lt;&#x2F;description&gt;</span><br><span class="line"></span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;java.version&gt;1.8&lt;&#x2F;java.version&gt;</span><br><span class="line">    &lt;&#x2F;properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;tk.mybatis&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mapper-spring-boot-starter&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.1.5&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;scope&gt;runtime&lt;&#x2F;scope&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;&#x2F;scope&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.18.8&lt;&#x2F;version&gt;</span><br><span class="line">            &lt;scope&gt;provided&lt;&#x2F;scope&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;!--        spring-boot-starter-xxxx--&gt;</span><br><span class="line">&lt;!--        xxxx-spring-boot-starter--&gt;</span><br><span class="line">&lt;!--        spring-cloud-starter-&#123;spring cloud子项目的名称&#125;-[&#123;模块名称&#125;]--&gt;</span><br><span class="line">&lt;!--        feign spring-cloud-starter-openfeign--&gt;</span><br><span class="line">&lt;!--        sentinel spring-cloud-starter-alibaba-sentinel--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;org.apache.rocketmq&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;rocketmq-spring-boot-starter&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;version&gt;2.0.3&lt;&#x2F;version&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;spring-cloud-starter-stream-rocketmq&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;io.jsonwebtoken&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;jjwt-api&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;version&gt;0.10.7&lt;&#x2F;version&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;io.jsonwebtoken&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;jjwt-impl&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;version&gt;0.10.7&lt;&#x2F;version&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;scope&gt;runtime&lt;&#x2F;scope&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;io.jsonwebtoken&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;jjwt-jackson&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;version&gt;0.10.7&lt;&#x2F;version&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;scope&gt;runtime&lt;&#x2F;scope&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;com.github.binarywang&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;weixin-java-miniapp&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;version&gt;3.5.0&lt;&#x2F;version&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;spring-boot-starter-aop&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;spring-boot-starter-actuator&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line">    &lt;&#x2F;dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencyManagement&gt;</span><br><span class="line">        &lt;dependencies&gt;</span><br><span class="line">            &lt;!--整合spring cloud--&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-cloud-dependencies&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;Greenwich.SR1&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;type&gt;pom&lt;&#x2F;type&gt;</span><br><span class="line">                &lt;scope&gt;import&lt;&#x2F;scope&gt;</span><br><span class="line">            &lt;&#x2F;dependency&gt;</span><br><span class="line">            &lt;!--整合spring cloud alibaba--&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;0.9.0.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;type&gt;pom&lt;&#x2F;type&gt;</span><br><span class="line">                &lt;scope&gt;import&lt;&#x2F;scope&gt;</span><br><span class="line">            &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;&#x2F;dependencies&gt;</span><br><span class="line">    &lt;&#x2F;dependencyManagement&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.mybatis.generator&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;1.3.6&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;configurationFile&gt;</span><br><span class="line">                        $&#123;basedir&#125;&#x2F;src&#x2F;main&#x2F;resources&#x2F;generator&#x2F;generatorConfig.xml</span><br><span class="line">                    &lt;&#x2F;configurationFile&gt;</span><br><span class="line">                    &lt;overwrite&gt;true&lt;&#x2F;overwrite&gt;</span><br><span class="line">                    &lt;verbose&gt;true&lt;&#x2F;verbose&gt;</span><br><span class="line">                &lt;&#x2F;configuration&gt;</span><br><span class="line">                &lt;dependencies&gt;</span><br><span class="line">                    &lt;dependency&gt;</span><br><span class="line">                        &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">                        &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">                        &lt;version&gt;5.1.22&lt;&#x2F;version&gt;</span><br><span class="line">                    &lt;&#x2F;dependency&gt;</span><br><span class="line">                    &lt;dependency&gt;</span><br><span class="line">                        &lt;groupId&gt;tk.mybatis&lt;&#x2F;groupId&gt;</span><br><span class="line">                        &lt;artifactId&gt;mapper&lt;&#x2F;artifactId&gt;</span><br><span class="line">                        &lt;version&gt;4.1.5&lt;&#x2F;version&gt;</span><br><span class="line">                    &lt;&#x2F;dependency&gt;</span><br><span class="line">                &lt;&#x2F;dependencies&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">        &lt;&#x2F;plugins&gt;</span><br><span class="line">    &lt;&#x2F;build&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;project&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-增加UserCenterFeignClient类"><a href="#3-增加UserCenterFeignClient类" class="headerlink" title="3. 增加UserCenterFeignClient类"></a>3. 增加UserCenterFeignClient类</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter.feignclient;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.zql.contentCenter.domain.dto.user.UserDTO;</span><br><span class="line">import org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"></span><br><span class="line">@FeignClient(name &#x3D; &quot;user-center&quot;)</span><br><span class="line">public interface UserCenterFeignClient &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;&#x2F;user&#x2F;&#123;id&#125;&quot;)</span><br><span class="line">    public UserDTO getUser(@PathVariable Integer id);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-ShareService修改调用方式"><a href="#4-ShareService修改调用方式" class="headerlink" title="4. ShareService修改调用方式"></a>4. ShareService修改调用方式</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter.service;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.zql.contentCenter.dao.content.ShareMapper;</span><br><span class="line">import com.zql.contentCenter.domain.dto.content.ShareDTO;</span><br><span class="line">import com.zql.contentCenter.domain.dto.user.UserDTO;</span><br><span class="line">import com.zql.contentCenter.domain.entity.content.Share;</span><br><span class="line">import com.zql.contentCenter.feignclient.UserCenterFeignClient;</span><br><span class="line">import org.springframework.beans.BeanUtils;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.cloud.client.ServiceInstance;</span><br><span class="line">import org.springframework.cloud.client.discovery.DiscoveryClient;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line">import org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line">import java.net.URI;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Optional;</span><br><span class="line">import java.util.concurrent.ThreadLocalRandom;</span><br><span class="line">import java.util.stream.Collector;</span><br><span class="line">import java.util.stream.Collectors;</span><br><span class="line">import java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class ShareService &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private ShareMapper shareMapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserCenterFeignClient userCenterFeignClient;</span><br><span class="line"></span><br><span class="line">    public ShareDTO getById(Integer id) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Share share &#x3D; shareMapper.selectByPrimaryKey(id);</span><br><span class="line">        UserDTO userDTO &#x3D; userCenterFeignClient.getUser(share.getUserId());</span><br><span class="line"></span><br><span class="line">        ShareDTO shareDTO &#x3D; new ShareDTO();</span><br><span class="line"></span><br><span class="line">        BeanUtils.copyProperties(share,shareDTO);</span><br><span class="line">        shareDTO.setUserDTO(userDTO);</span><br><span class="line"></span><br><span class="line">        return shareDTO;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="4-启动类加注解"><a href="#4-启动类加注解" class="headerlink" title="4. 启动类加注解"></a>4. 启动类加注解</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.cloud.client.loadbalancer.LoadBalanced;</span><br><span class="line">import org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.web.client.RestTemplate;</span><br><span class="line">import tk.mybatis.spring.annotation.MapperScan;</span><br><span class="line"></span><br><span class="line">@MapperScan(&quot;com.zql&quot;)</span><br><span class="line">@SpringBootApplication</span><br><span class="line">@EnableFeignClients</span><br><span class="line">public class ContentCenterApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        SpringApplication.run(ContentCenterApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    @LoadBalanced</span><br><span class="line">    public RestTemplate restTemplate() &#123;</span><br><span class="line"></span><br><span class="line">        return new RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>







]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-02-Feign的组成</title>
    <url>/2021/03/09/7-02-Feign%E7%9A%84%E7%BB%84%E6%88%90/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>







]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-18-现有架构存在的问题</title>
    <url>/2020/05/07/6-18-%E7%8E%B0%E6%9C%89%E6%9E%B6%E6%9E%84%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>





]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>6-14-扩展Ribbon-支持Nacos权重</title>
    <url>/2020/05/07/6-14-%E6%89%A9%E5%B1%95Ribbon-%E6%94%AF%E6%8C%81Nacos%E6%9D%83%E9%87%8D/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-配置Nacos，修改服务提供者权重"><a href="#1-配置Nacos，修改服务提供者权重" class="headerlink" title="1. 配置Nacos，修改服务提供者权重"></a>1. 配置Nacos，修改服务提供者权重</h2><p><img src="/2020/05/07/6-14-%E6%89%A9%E5%B1%95Ribbon-%E6%94%AF%E6%8C%81Nacos%E6%9D%83%E9%87%8D/image-20210304222731686.png" alt="image-20210304222731686"></p>
<p><img src="/2020/05/07/6-14-%E6%89%A9%E5%B1%95Ribbon-%E6%94%AF%E6%8C%81Nacos%E6%9D%83%E9%87%8D/image-20210304222848469.png" alt="image-20210304222848469"></p>
<p><img src="/2020/05/07/6-14-%E6%89%A9%E5%B1%95Ribbon-%E6%94%AF%E6%8C%81Nacos%E6%9D%83%E9%87%8D/image-20210304223135691.png" alt="image-20210304223135691"></p>
<h2 id="2-创建Nacos权重配置类"><a href="#2-创建Nacos权重配置类" class="headerlink" title="2. 创建Nacos权重配置类"></a>2. 创建Nacos权重配置类</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter.configuration;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.alibaba.nacos.api.exception.NacosException;</span><br><span class="line">import com.alibaba.nacos.api.naming.NamingService;</span><br><span class="line">import com.alibaba.nacos.api.naming.pojo.Instance;</span><br><span class="line">import com.netflix.client.config.IClientConfig;</span><br><span class="line">import com.netflix.loadbalancer.*;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.cloud.alibaba.nacos.NacosDiscoveryProperties;</span><br><span class="line">import org.springframework.cloud.alibaba.nacos.ribbon.NacosServer;</span><br><span class="line"></span><br><span class="line">public class NacosWeightedRule extends AbstractLoadBalancerRule &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private NacosDiscoveryProperties nacosDiscoveryProperties;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void initWithNiwsConfig(IClientConfig iClientConfig) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Server choose(Object o) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line"></span><br><span class="line">            BaseLoadBalancer loadBalancer &#x3D; (BaseLoadBalancer) this.getLoadBalancer();</span><br><span class="line">            &#x2F;&#x2F;想要请求的微服务的名称</span><br><span class="line">            String name &#x3D; loadBalancer.getName();</span><br><span class="line">            &#x2F;&#x2F;拿到服务发现的相关API</span><br><span class="line">            NamingService namingService &#x3D; nacosDiscoveryProperties.namingServiceInstance();</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F;nacos client自动通过基于权重的负载均衡算法，返回一个实例</span><br><span class="line">            Instance instance &#x3D; namingService.selectOneHealthyInstance(name);</span><br><span class="line"></span><br><span class="line">            return new NacosServer(instance);</span><br><span class="line">        &#125; catch (NacosException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return null;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="3-修改RibbonConfiguration文件"><a href="#3-修改RibbonConfiguration文件" class="headerlink" title="3. 修改RibbonConfiguration文件"></a>3. 修改RibbonConfiguration文件</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package ribbonconfiguration;</span><br><span class="line"></span><br><span class="line">import com.netflix.loadbalancer.IRule;</span><br><span class="line">import com.netflix.loadbalancer.RandomRule;</span><br><span class="line">import com.zql.contentCenter.configuration.NacosWeightedRule;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public class RibbonConfiguration &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public IRule ribbonRule() &#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;return new RandomRule();</span><br><span class="line">        return new NacosWeightedRule();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="4-调用测试，9012端口被更多次调用"><a href="#4-调用测试，9012端口被更多次调用" class="headerlink" title="4.调用测试，9012端口被更多次调用"></a>4.调用测试，9012端口被更多次调用</h2><p><img src="/2020/05/07/6-14-%E6%89%A9%E5%B1%95Ribbon-%E6%94%AF%E6%8C%81Nacos%E6%9D%83%E9%87%8D/image-20210304223701238.png" alt="image-20210304223701238"></p>
<p><img src="/2020/05/07/6-14-%E6%89%A9%E5%B1%95Ribbon-%E6%94%AF%E6%8C%81Nacos%E6%9D%83%E9%87%8D/image-20210304223720828.png" alt="image-20210304223720828"></p>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-03-细粒度配置自定义-01-Java代码方式-指定日志级别</title>
    <url>/2021/03/09/7-03-%E7%BB%86%E7%B2%92%E5%BA%A6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89-01-Java%E4%BB%A3%E7%A0%81%E6%96%B9%E5%BC%8F-%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-项目结构"><a href="#1-项目结构" class="headerlink" title="1. 项目结构"></a>1. 项目结构</h2><p><img src="/2021/03/09/7-03-%E7%BB%86%E7%B2%92%E5%BA%A6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89-01-Java%E4%BB%A3%E7%A0%81%E6%96%B9%E5%BC%8F-%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB/image-20210308234835110.png" alt="image-20210308234835110"></p>
<h2 id="2-修改content-center的application-yml文件"><a href="#2-修改content-center的application-yml文件" class="headerlink" title="2. 修改content-center的application.yml文件"></a>2. 修改content-center的application.yml文件</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;haike.myds.me:13911&#x2F;content_center</span><br><span class="line">    hikari:</span><br><span class="line">      username: root</span><br><span class="line">      password: root</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: haike.myds.me:13916</span><br><span class="line">        # 修改为NJ</span><br><span class="line">        cluster-name: NJ</span><br><span class="line">        namespace: 46a69d7c-b8e4-4fa2-b906-a4cc49362120</span><br><span class="line">        metadata:</span><br><span class="line">          version: v1</span><br><span class="line">          target-version: v1</span><br><span class="line">  application:</span><br><span class="line">    name: content-center</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: 9020</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user-center:</span><br><span class="line">  ribbon:</span><br><span class="line">    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logging:</span><br><span class="line">  level:</span><br><span class="line">    com.zql.contentCenter.feignclient.UserCenterFeignClient: debug</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-新增UserCenterFeignConfiguration类"><a href="#2-新增UserCenterFeignConfiguration类" class="headerlink" title="2. 新增UserCenterFeignConfiguration类"></a>2. 新增UserCenterFeignConfiguration类</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter.configuration;</span><br><span class="line"></span><br><span class="line">import feign.Logger;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class UserCenterFeignConfiguration &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public Logger.Level level() &#123;</span><br><span class="line"></span><br><span class="line">        return Logger.Level.FULL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-修改UserCenterFeignClient类"><a href="#3-修改UserCenterFeignClient类" class="headerlink" title="3. 修改UserCenterFeignClient类"></a>3. 修改UserCenterFeignClient类</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter.feignclient;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.zql.contentCenter.configuration.UserCenterFeignConfiguration;</span><br><span class="line">import com.zql.contentCenter.domain.dto.user.UserDTO;</span><br><span class="line">import org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"></span><br><span class="line">@FeignClient(name &#x3D; &quot;user-center&quot;,configuration &#x3D; UserCenterFeignConfiguration.class)</span><br><span class="line">public interface UserCenterFeignClient &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;&#x2F;user&#x2F;&#123;id&#125;&quot;)</span><br><span class="line">    public UserDTO getUser(@PathVariable Integer id);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-05-全局配置-01-Java代码方式-指定日志级别</title>
    <url>/2021/03/09/7-05-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-01-Java%E4%BB%A3%E7%A0%81%E6%96%B9%E5%BC%8F-%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-项目目录"><a href="#1-项目目录" class="headerlink" title="1. 项目目录"></a>1. 项目目录</h2><p><img src="/2021/03/09/7-05-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-01-Java%E4%BB%A3%E7%A0%81%E6%96%B9%E5%BC%8F-%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB/image-20210310222506842.png" alt="image-20210310222506842"></p>
<h2 id="2-修改ContentCenterApplication"><a href="#2-修改ContentCenterApplication" class="headerlink" title="2. 修改ContentCenterApplication"></a>2. 修改ContentCenterApplication</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zql.contentCenter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zql.contentCenter.configuration.GlobalFeignConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.loadbalancer.LoadBalanced;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.spring.annotation.MapperScan;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.zql&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableFeignClients(defaultConfiguration = GlobalFeignConfiguration.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContentCenterApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        SpringApplication.run(ContentCenterApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-修改application-yml"><a href="#3-修改application-yml" class="headerlink" title="3. 修改application.yml"></a>3. 修改application.yml</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;haike.myds.me:13911&#x2F;content_center</span><br><span class="line">    hikari:</span><br><span class="line">      username: root</span><br><span class="line">      password: root</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: haike.myds.me:13916</span><br><span class="line">        # 修改为NJ</span><br><span class="line">        cluster-name: NJ</span><br><span class="line">        namespace: 46a69d7c-b8e4-4fa2-b906-a4cc49362120</span><br><span class="line">        metadata:</span><br><span class="line">          version: v1</span><br><span class="line">          target-version: v1</span><br><span class="line">  application:</span><br><span class="line">    name: content-center</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: 9020</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user-center:</span><br><span class="line">  ribbon:</span><br><span class="line">    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logging:</span><br><span class="line">  level:</span><br><span class="line">    com.zql.contentCenter.feignclient.UserCenterFeignClient: debug</span><br><span class="line"></span><br><span class="line">#feign:</span><br><span class="line">#  client:</span><br><span class="line">#    config:</span><br><span class="line">#      user-center:</span><br><span class="line">#        loggerLevel: full</span><br></pre></td></tr></table></figure>



]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-04-细粒度配置自定义-02-配置属性方式-指定日志级别</title>
    <url>/2021/03/09/7-04-%E7%BB%86%E7%B2%92%E5%BA%A6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89-02-%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E6%96%B9%E5%BC%8F-%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-项目目录"><a href="#1-项目目录" class="headerlink" title="1. 项目目录"></a>1. 项目目录</h2><p><img src="/2021/03/09/7-04-%E7%BB%86%E7%B2%92%E5%BA%A6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89-02-%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E6%96%B9%E5%BC%8F-%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB/image-20210310221647602.png" alt="image-20210310221647602"></p>
<h2 id="2-修改UserCenterFeignClient"><a href="#2-修改UserCenterFeignClient" class="headerlink" title="2.  修改UserCenterFeignClient"></a>2.  修改UserCenterFeignClient</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter.feignclient;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.zql.contentCenter.configuration.UserCenterFeignConfiguration;</span><br><span class="line">import com.zql.contentCenter.domain.dto.user.UserDTO;</span><br><span class="line">import org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;@FeignClient(name &#x3D; &quot;user-center&quot;,configuration &#x3D; UserCenterFeignConfiguration.class)</span><br><span class="line">@FeignClient(name &#x3D; &quot;user-center&quot;)</span><br><span class="line">public interface UserCenterFeignClient &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;&#x2F;user&#x2F;&#123;id&#125;&quot;)</span><br><span class="line">    public UserDTO getUser(@PathVariable Integer id);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-修改application-yml"><a href="#3-修改application-yml" class="headerlink" title="3. 修改application.yml"></a>3. 修改application.yml</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;haike.myds.me:13911&#x2F;content_center</span><br><span class="line">    hikari:</span><br><span class="line">      username: root</span><br><span class="line">      password: root</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: haike.myds.me:13916</span><br><span class="line">        # 修改为NJ</span><br><span class="line">        cluster-name: NJ</span><br><span class="line">        namespace: 46a69d7c-b8e4-4fa2-b906-a4cc49362120</span><br><span class="line">        metadata:</span><br><span class="line">          version: v1</span><br><span class="line">          target-version: v1</span><br><span class="line">  application:</span><br><span class="line">    name: content-center</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: 9020</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user-center:</span><br><span class="line">  ribbon:</span><br><span class="line">    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logging:</span><br><span class="line">  level:</span><br><span class="line">    com.zql.contentCenter.feignclient.UserCenterFeignClient: debug</span><br><span class="line"></span><br><span class="line">feign:</span><br><span class="line">  client:</span><br><span class="line">    config:</span><br><span class="line">      user-center:</span><br><span class="line">        loggerLevel: full</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-06-全局配置-02-配置属性方式-指定日志级别</title>
    <url>/2021/03/09/7-06-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-02-%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E6%96%B9%E5%BC%8F-%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-项目目录"><a href="#1-项目目录" class="headerlink" title="1. 项目目录"></a>1. 项目目录</h2><p><img src="/2021/03/09/7-06-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-02-%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E6%96%B9%E5%BC%8F-%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB/image-20210310222926470.png" alt="image-20210310222926470"></p>
<h2 id="2-修改application-yml"><a href="#2-修改application-yml" class="headerlink" title="2. 修改application.yml"></a>2. 修改application.yml</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;haike.myds.me:13911&#x2F;content_center</span><br><span class="line">    hikari:</span><br><span class="line">      username: root</span><br><span class="line">      password: root</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: haike.myds.me:13916</span><br><span class="line">        # 修改为NJ</span><br><span class="line">        cluster-name: NJ</span><br><span class="line">        namespace: 46a69d7c-b8e4-4fa2-b906-a4cc49362120</span><br><span class="line">        metadata:</span><br><span class="line">          version: v1</span><br><span class="line">          target-version: v1</span><br><span class="line">  application:</span><br><span class="line">    name: content-center</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: 9020</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user-center:</span><br><span class="line">  ribbon:</span><br><span class="line">    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logging:</span><br><span class="line">  level:</span><br><span class="line">    com.zql.contentCenter.feignclient.UserCenterFeignClient: debug</span><br><span class="line"></span><br><span class="line"># 本次修改点</span><br><span class="line">feign:</span><br><span class="line">  client:</span><br><span class="line">    config:</span><br><span class="line">      default:</span><br><span class="line">        loggerLevel: full</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-修改CententCenterApplication"><a href="#3-修改CententCenterApplication" class="headerlink" title="3. 修改CententCenterApplication"></a>3. 修改CententCenterApplication</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.zql.contentCenter;</span><br><span class="line"></span><br><span class="line">import com.zql.contentCenter.configuration.GlobalFeignConfiguration;</span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.cloud.client.loadbalancer.LoadBalanced;</span><br><span class="line">import org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.web.client.RestTemplate;</span><br><span class="line">import tk.mybatis.spring.annotation.MapperScan;</span><br><span class="line"></span><br><span class="line">@MapperScan(&quot;com.zql&quot;)</span><br><span class="line">@SpringBootApplication</span><br><span class="line">&#x2F;&#x2F;@EnableFeignClients(defaultConfiguration &#x3D; GlobalFeignConfiguration.class)</span><br><span class="line">&#x2F;&#x2F; 本次修改点</span><br><span class="line">@EnableFeignClients</span><br><span class="line">public class ContentCenterApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        SpringApplication.run(ContentCenterApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    @LoadBalanced</span><br><span class="line">    public RestTemplate restTemplate() &#123;</span><br><span class="line"></span><br><span class="line">        return new RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-07-支持的配置项</title>
    <url>/2021/03/09/7-07-%E6%94%AF%E6%8C%81%E7%9A%84%E9%85%8D%E7%BD%AE%E9%A1%B9/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>







]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-08-配置最佳实践总结</title>
    <url>/2021/03/09/7-08-%E9%85%8D%E7%BD%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-Ribbon配置-VS-Feign配置"><a href="#1-Ribbon配置-VS-Feign配置" class="headerlink" title="1. Ribbon配置 VS Feign配置"></a>1. Ribbon配置 VS Feign配置</h2><p><img src="/2021/03/09/7-08-%E9%85%8D%E7%BD%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93/image-20210310223629523.png" alt="image-20210310223629523"></p>
<h2 id="2-Feign代码方式-VS-属性方式"><a href="#2-Feign代码方式-VS-属性方式" class="headerlink" title="2.   Feign代码方式 VS 属性方式"></a>2.   Feign代码方式 VS 属性方式</h2><p><img src="/2021/03/09/7-08-%E9%85%8D%E7%BD%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93/image-20210310223906912.png" alt="image-20210310223906912"></p>
<p><img src="/2021/03/09/7-08-%E9%85%8D%E7%BD%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93/image-20210310223802321.png" alt="image-20210310223802321"></p>
<h2 id="3-最佳实践"><a href="#3-最佳实践" class="headerlink" title="3. 最佳实践"></a>3. 最佳实践</h2><p><img src="/2021/03/09/7-08-%E9%85%8D%E7%BD%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93/image-20210310224008734.png" alt="image-20210310224008734"></p>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-09-Feign的继承</title>
    <url>/2021/03/09/7-09-Feign%E7%9A%84%E7%BB%A7%E6%89%BF/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>







]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-10-多参数请求构造</title>
    <url>/2021/03/09/7-10-%E5%A4%9A%E5%8F%82%E6%95%B0%E8%AF%B7%E6%B1%82%E6%9E%84%E9%80%A0/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>







]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-11-Feign脱离Ribbon使用</title>
    <url>/2021/03/09/7-11-Feign%E8%84%B1%E7%A6%BBRibbon%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>







]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-14-常见问题总结</title>
    <url>/2021/03/09/7-14-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>







]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-13-Feign性能优化</title>
    <url>/2021/03/09/7-13-Feign%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<p><img src="/2021/03/09/7-13-Feign%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/image-20210322222907614.png" alt="image-20210322222907614"></p>
<h2 id="优化方式一：配置连接池"><a href="#优化方式一：配置连接池" class="headerlink" title="优化方式一：配置连接池"></a>优化方式一：配置连接池</h2><h4 id="1-添加依赖"><a href="#1-添加依赖" class="headerlink" title="1. 添加依赖"></a>1. 添加依赖</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot;</span><br><span class="line">         xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0 http:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;</span><br><span class="line"></span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.1.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;relativePath&#x2F;&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">    &lt;&#x2F;parent&gt;</span><br><span class="line"></span><br><span class="line">    &lt;groupId&gt;com.zql.user-center&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;content-center&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line"></span><br><span class="line">    &lt;name&gt;content-center&lt;&#x2F;name&gt;</span><br><span class="line">    &lt;description&gt;Demo project for Spring Boot&lt;&#x2F;description&gt;</span><br><span class="line"></span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;java.version&gt;1.8&lt;&#x2F;java.version&gt;</span><br><span class="line">    &lt;&#x2F;properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;tk.mybatis&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mapper-spring-boot-starter&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.1.5&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;scope&gt;runtime&lt;&#x2F;scope&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;&#x2F;scope&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.18.8&lt;&#x2F;version&gt;</span><br><span class="line">            &lt;scope&gt;provided&lt;&#x2F;scope&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;!--        spring-boot-starter-xxxx--&gt;</span><br><span class="line">&lt;!--        xxxx-spring-boot-starter--&gt;</span><br><span class="line">&lt;!--        spring-cloud-starter-&#123;spring cloud子项目的名称&#125;-[&#123;模块名称&#125;]--&gt;</span><br><span class="line">&lt;!--        feign spring-cloud-starter-openfeign--&gt;</span><br><span class="line">&lt;!--        sentinel spring-cloud-starter-alibaba-sentinel--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--   本次修改点     --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;io.github.openfeign&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;feign-httpclient&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;org.apache.rocketmq&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;rocketmq-spring-boot-starter&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;version&gt;2.0.3&lt;&#x2F;version&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;spring-cloud-starter-stream-rocketmq&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;io.jsonwebtoken&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;jjwt-api&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;version&gt;0.10.7&lt;&#x2F;version&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;io.jsonwebtoken&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;jjwt-impl&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;version&gt;0.10.7&lt;&#x2F;version&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;scope&gt;runtime&lt;&#x2F;scope&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;io.jsonwebtoken&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;jjwt-jackson&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;version&gt;0.10.7&lt;&#x2F;version&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;scope&gt;runtime&lt;&#x2F;scope&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;com.github.binarywang&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;weixin-java-miniapp&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;version&gt;3.5.0&lt;&#x2F;version&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;spring-boot-starter-aop&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--        &lt;dependency&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;--&gt;</span><br><span class="line">&lt;!--            &lt;artifactId&gt;spring-boot-starter-actuator&lt;&#x2F;artifactId&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;&#x2F;dependency&gt;--&gt;</span><br><span class="line">    &lt;&#x2F;dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencyManagement&gt;</span><br><span class="line">        &lt;dependencies&gt;</span><br><span class="line">            &lt;!--整合spring cloud--&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-cloud-dependencies&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;Greenwich.SR1&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;type&gt;pom&lt;&#x2F;type&gt;</span><br><span class="line">                &lt;scope&gt;import&lt;&#x2F;scope&gt;</span><br><span class="line">            &lt;&#x2F;dependency&gt;</span><br><span class="line">            &lt;!--整合spring cloud alibaba--&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;0.9.0.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;type&gt;pom&lt;&#x2F;type&gt;</span><br><span class="line">                &lt;scope&gt;import&lt;&#x2F;scope&gt;</span><br><span class="line">            &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;&#x2F;dependencies&gt;</span><br><span class="line">    &lt;&#x2F;dependencyManagement&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.mybatis.generator&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;1.3.6&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;configurationFile&gt;</span><br><span class="line">                        $&#123;basedir&#125;&#x2F;src&#x2F;main&#x2F;resources&#x2F;generator&#x2F;generatorConfig.xml</span><br><span class="line">                    &lt;&#x2F;configurationFile&gt;</span><br><span class="line">                    &lt;overwrite&gt;true&lt;&#x2F;overwrite&gt;</span><br><span class="line">                    &lt;verbose&gt;true&lt;&#x2F;verbose&gt;</span><br><span class="line">                &lt;&#x2F;configuration&gt;</span><br><span class="line">                &lt;dependencies&gt;</span><br><span class="line">                    &lt;dependency&gt;</span><br><span class="line">                        &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">                        &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">                        &lt;version&gt;5.1.22&lt;&#x2F;version&gt;</span><br><span class="line">                    &lt;&#x2F;dependency&gt;</span><br><span class="line">                    &lt;dependency&gt;</span><br><span class="line">                        &lt;groupId&gt;tk.mybatis&lt;&#x2F;groupId&gt;</span><br><span class="line">                        &lt;artifactId&gt;mapper&lt;&#x2F;artifactId&gt;</span><br><span class="line">                        &lt;version&gt;4.1.5&lt;&#x2F;version&gt;</span><br><span class="line">                    &lt;&#x2F;dependency&gt;</span><br><span class="line">                &lt;&#x2F;dependencies&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">        &lt;&#x2F;plugins&gt;</span><br><span class="line">    &lt;&#x2F;build&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;project&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-修改配置文件"><a href="#2-修改配置文件" class="headerlink" title="2. 修改配置文件"></a>2. 修改配置文件</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;haike.myds.me:13911&#x2F;content_center</span><br><span class="line">    hikari:</span><br><span class="line">      username: root</span><br><span class="line">      password: root</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: haike.myds.me:13916</span><br><span class="line">        # 修改为NJ</span><br><span class="line">        cluster-name: NJ</span><br><span class="line">        namespace: 46a69d7c-b8e4-4fa2-b906-a4cc49362120</span><br><span class="line">        metadata:</span><br><span class="line">          version: v1</span><br><span class="line">          target-version: v1</span><br><span class="line">  application:</span><br><span class="line">    name: content-center</span><br><span class="line"></span><br><span class="line">## 本次修改点</span><br><span class="line">  main:</span><br><span class="line">    allow-bean-definition-overriding: true</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: 9020</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user-center:</span><br><span class="line">  ribbon:</span><br><span class="line">    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logging:</span><br><span class="line">  level:</span><br><span class="line">    com.zql.contentCenter.feignclient.UserCenterFeignClient: debug</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">feign:</span><br><span class="line">  client:</span><br><span class="line">    config:</span><br><span class="line">      default:</span><br><span class="line">        loggerLevel: full</span><br><span class="line">  ## 本次修改点</span><br><span class="line">  httpclient:</span><br><span class="line">    # 让feign使用apache httpclient做请求；而不是默认的urlconnection</span><br><span class="line">    enabled: true</span><br><span class="line">    # feign的最大连接数</span><br><span class="line">    max-connections: 200</span><br><span class="line">    # feign单个路径的最大连接数</span><br><span class="line">    max-connections-per-route: 50</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>









]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-15-现有架构总结</title>
    <url>/2021/03/09/7-15-%E7%8E%B0%E6%9C%89%E6%9E%B6%E6%9E%84%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>







]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-01-雪崩效应</title>
    <url>/2021/03/09/8-01-%E9%9B%AA%E5%B4%A9%E6%95%88%E5%BA%94/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>7-12-RestTemplatevsFeign</title>
    <url>/2021/03/09/7-12-RestTemplatevsFeign/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<p><img src="/2021/03/09/7-12-RestTemplatevsFeign/image-20210322221445307.png" alt="image-20210322221445307"></p>
<p><img src="/2021/03/09/7-12-RestTemplatevsFeign/image-20210322221502372.png" alt="image-20210322221502372"></p>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-03,04-Sentine配置</title>
    <url>/2021/03/23/8-03,04-Sentine%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-项目目录"><a href="#1-项目目录" class="headerlink" title="1. 项目目录"></a>1. 项目目录</h2><p><img src="/2021/03/23/8-03,04-Sentine%E9%85%8D%E7%BD%AE/image-20210322224718413.png" alt="image-20210322224718413"></p>
<h2 id="2-content-center添加依赖"><a href="#2-content-center添加依赖" class="headerlink" title="2. content-center添加依赖"></a>2. content-center添加依赖</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zql.user-center<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>content-center<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>content-center<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>tk.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        spring-boot-starter-xxxx--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        xxxx-spring-boot-starter--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        spring-cloud-starter-&#123;spring cloud子项目的名称&#125;-[&#123;模块名称&#125;]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        feign spring-cloud-starter-openfeign--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        sentinel spring-cloud-starter-alibaba-sentinel--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.openfeign<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>feign-httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--   本次修改点     --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-sentinel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;org.apache.rocketmq&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;rocketmq-spring-boot-starter&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;version&gt;2.0.3&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;spring-cloud-starter-stream-rocketmq&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;version&gt;0.10.7&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;version&gt;0.10.7&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;scope&gt;runtime&lt;/scope&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;version&gt;0.10.7&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;scope&gt;runtime&lt;/scope&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;com.github.binarywang&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;weixin-java-miniapp&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;version&gt;3.5.0&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--整合spring cloud--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>Greenwich.SR1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--整合spring cloud alibaba--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configurationFile</span>&gt;</span></span><br><span class="line">                        $&#123;basedir&#125;/src/main/resources/generator/generatorConfig.xml</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configurationFile</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">verbose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">verbose</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>tk.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-修改content-center配置文件"><a href="#3-修改content-center配置文件" class="headerlink" title="3. 修改content-center配置文件"></a>3. 修改content-center配置文件</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://haike.myds.me:13911/content_center</span></span><br><span class="line">    <span class="attr">hikari:</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">haike.myds.me:13916</span></span><br><span class="line">        <span class="comment"># 修改为NJ</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">NJ</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">46a69d7c-b8e4-4fa2-b906-a4cc49362120</span></span><br><span class="line">        <span class="attr">metadata:</span></span><br><span class="line">          <span class="attr">version:</span> <span class="string">v1</span></span><br><span class="line">          <span class="attr">target-version:</span> <span class="string">v1</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">content-center</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 本次修改点</span></span><br><span class="line">  <span class="attr">main:</span></span><br><span class="line">    <span class="attr">allow-bean-definition-overriding:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9020</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">user-center:</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.netflix.loadbalancer.RandomRule</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.zql.contentCenter.feignclient.UserCenterFeignClient:</span> <span class="string">debug</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">full</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">httpclient:</span></span><br><span class="line">    <span class="comment"># 让feign使用apache httpclient做请求；而不是默认的urlconnection</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># feign的最大连接数</span></span><br><span class="line">    <span class="attr">max-connections:</span> <span class="number">200</span></span><br><span class="line">    <span class="comment"># feign单个路径的最大连接数</span></span><br><span class="line">    <span class="attr">max-connections-per-route:</span> <span class="number">50</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## 本次修改点</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&#x27;*&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="4-访问地址"><a href="#4-访问地址" class="headerlink" title="4. 访问地址"></a>4. 访问地址</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9020&#x2F;actuator&#x2F;sentinel</span><br></pre></td></tr></table></figure>

<p><img src="/2021/03/23/8-03,04-Sentine%E9%85%8D%E7%BD%AE/image-20210322225053767.png" alt="image-20210322225053767"></p>
<h2 id="5-添加可视化控制台"><a href="#5-添加可视化控制台" class="headerlink" title="5. 添加可视化控制台"></a>5. 添加可视化控制台</h2><h3 id="5-1-下载Sentinel-v1-6-3-JAR包，并运行"><a href="#5-1-下载Sentinel-v1-6-3-JAR包，并运行" class="headerlink" title="5.1 下载Sentinel v1.6.3  JAR包，并运行"></a>5.1 下载Sentinel <a href="https://github.com/alibaba/Sentinel/releases/tag/1.6.3">v1.6.3 </a> JAR包，并运行</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java -jar sentinel-dashboard-1.6.3.jar</span><br></pre></td></tr></table></figure>

<h3 id="5-2-配置content-center配置文件"><a href="#5-2-配置content-center配置文件" class="headerlink" title="5.2 配置content-center配置文件"></a>5.2 配置content-center配置文件</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://haike.myds.me:13911/content_center</span></span><br><span class="line">    <span class="attr">hikari:</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">haike.myds.me:13916</span></span><br><span class="line">        <span class="comment"># 修改为NJ</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">NJ</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">46a69d7c-b8e4-4fa2-b906-a4cc49362120</span></span><br><span class="line">        <span class="attr">metadata:</span></span><br><span class="line">          <span class="attr">version:</span> <span class="string">v1</span></span><br><span class="line">          <span class="attr">target-version:</span> <span class="string">v1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## 本次修改点</span></span><br><span class="line">    <span class="attr">sentinel:</span></span><br><span class="line">      <span class="attr">transport:</span></span><br><span class="line">        <span class="attr">dashboard:</span> <span class="string">localhost:8080</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">content-center</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">main:</span></span><br><span class="line">    <span class="attr">allow-bean-definition-overriding:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9020</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">user-center:</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.netflix.loadbalancer.RandomRule</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.zql.contentCenter.feignclient.UserCenterFeignClient:</span> <span class="string">debug</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">full</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">httpclient:</span></span><br><span class="line">    <span class="comment"># 让feign使用apache httpclient做请求；而不是默认的urlconnection</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># feign的最大连接数</span></span><br><span class="line">    <span class="attr">max-connections:</span> <span class="number">200</span></span><br><span class="line">    <span class="comment"># feign单个路径的最大连接数</span></span><br><span class="line">    <span class="attr">max-connections-per-route:</span> <span class="number">50</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## 本次修改点</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&#x27;*&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-3-访问"><a href="#5-3-访问" class="headerlink" title="5.3 访问"></a>5.3 访问</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9020&#x2F;shares&#x2F;1</span><br></pre></td></tr></table></figure>

<h3 id="5-4-查看结果"><a href="#5-4-查看结果" class="headerlink" title="5.4 查看结果"></a>5.4 查看结果</h3><p><img src="/2021/03/23/8-03,04-Sentine%E9%85%8D%E7%BD%AE/image-20210322231110749.png" alt="image-20210322231110749"></p>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-02-常见容错方案</title>
    <url>/2021/03/09/8-02-%E5%B8%B8%E8%A7%81%E5%AE%B9%E9%94%99%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<p><img src="/2021/03/09/8-02-%E5%B8%B8%E8%A7%81%E5%AE%B9%E9%94%99%E6%96%B9%E6%A1%88/image-20210322223935586.png" alt="image-20210322223935586"></p>
<p><img src="/2021/03/09/8-02-%E5%B8%B8%E8%A7%81%E5%AE%B9%E9%94%99%E6%96%B9%E6%A1%88/image-20210322224017552.png" alt="image-20210322224017552"></p>
<p><img src="/2021/03/09/8-02-%E5%B8%B8%E8%A7%81%E5%AE%B9%E9%94%99%E6%96%B9%E6%A1%88/image-20210322224037841.png" alt="image-20210322224037841"></p>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-06-降级规则详解【使用、流程、注意点、源码】</title>
    <url>/2021/03/09/8-06-%E9%99%8D%E7%BA%A7%E8%A7%84%E5%88%99%E8%AF%A6%E8%A7%A3%E3%80%90%E4%BD%BF%E7%94%A8%E3%80%81%E6%B5%81%E7%A8%8B%E3%80%81%E6%B3%A8%E6%84%8F%E7%82%B9%E3%80%81%E6%BA%90%E7%A0%81%E3%80%91/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-05-流控规则</title>
    <url>/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-页面"><a href="#1-页面" class="headerlink" title="1. 页面"></a>1. 页面</h2><p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210322233420588.png" alt="image-20210322233420588"></p>
<h2 id="2-流控模式一：直接"><a href="#2-流控模式一：直接" class="headerlink" title="2. 流控模式一：直接"></a>2. 流控模式一：直接</h2><h3 id="2-1-效果"><a href="#2-1-效果" class="headerlink" title="2.1 效果"></a>2.1 效果</h3><p>接口达到限流条件时，直接限流；</p>
<h3 id="2-2-单机阈值设为：1-每秒只允许访问一次"><a href="#2-2-单机阈值设为：1-每秒只允许访问一次" class="headerlink" title="2.2 单机阈值设为：1  每秒只允许访问一次"></a>2.2 单机阈值设为：1  每秒只允许访问一次</h3><p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210322233531728.png" alt="image-20210322233531728"></p>
<h3 id="2-3-测试"><a href="#2-3-测试" class="headerlink" title="2.3 测试"></a>2.3 测试</h3><h4 id="2-3-1-每秒访问次数超过2"><a href="#2-3-1-每秒访问次数超过2" class="headerlink" title="2.3.1 每秒访问次数超过2"></a>2.3.1 每秒访问次数超过2</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9010&#x2F;share&#x2F;1</span><br></pre></td></tr></table></figure>

<h4 id="2-3-2-查看效果"><a href="#2-3-2-查看效果" class="headerlink" title="2.3.2 查看效果"></a>2.3.2 查看效果</h4><p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210325105400143.png" alt="image-20210325105400143"></p>
<h2 id="3-流控模式二：关联模式"><a href="#3-流控模式二：关联模式" class="headerlink" title="3. 流控模式二：关联模式"></a>3. 流控模式二：关联模式</h2><h3 id="3-1-效果"><a href="#3-1-效果" class="headerlink" title="3.1 效果"></a>3.1 效果</h3><p>当关联的资源达到阈值时，就限流自己；</p>
<h3 id="3-2-添加接口"><a href="#3-2-添加接口" class="headerlink" title="3. 2 添加接口"></a>3. 2 添加接口</h3><p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210325110004348.png" alt="image-20210325110004348"></p>
<h3 id="3-3-添加阈值"><a href="#3-3-添加阈值" class="headerlink" title="3.3 添加阈值"></a>3.3 添加阈值</h3><p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210325110156668.png" alt="image-20210325110156668"></p>
<p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210325110301276.png" alt="image-20210325110301276"></p>
<h3 id="3-4-频繁访问queryShareById01接口"><a href="#3-4-频繁访问queryShareById01接口" class="headerlink" title="3.4 频繁访问queryShareById01接口"></a>3.4 频繁访问queryShareById01接口</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9010&#x2F;share&#x2F;queryShareById01&#x2F;1</span><br></pre></td></tr></table></figure>

<p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210325110419589.png" alt="image-20210325110419589"></p>
<h3 id="3-5-访问queryShareById00接口，被流控"><a href="#3-5-访问queryShareById00接口，被流控" class="headerlink" title="3.5 访问queryShareById00接口，被流控"></a>3.5 访问queryShareById00接口，被流控</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9010&#x2F;share&#x2F;queryShareById00&#x2F;1</span><br></pre></td></tr></table></figure>



<p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210325110529822.png" alt="image-20210325110529822"></p>
<h2 id="4-流控模式三：链路模式"><a href="#4-流控模式三：链路模式" class="headerlink" title="4. 流控模式三：链路模式"></a>4. 流控模式三：链路模式</h2><h3 id="4-1-修改service"><a href="#4-1-修改service" class="headerlink" title="4.1 修改service"></a>4.1 修改service</h3><p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210323001143292.png" alt="image-20210323001143292"></p>
<h3 id="4-2-修改Controller"><a href="#4-2-修改Controller" class="headerlink" title="4.2 修改Controller"></a>4.2 修改Controller</h3><p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210323001222636.png" alt="image-20210323001222636"></p>
<h3 id="4-3-在common添加流控"><a href="#4-3-在common添加流控" class="headerlink" title="4.3 在common添加流控"></a>4.3 在common添加流控</h3><p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210323001629209.png" alt="image-20210323001629209"></p>
<h3 id="4-4-多次访问share-getShare00-1-会被限流"><a href="#4-4-多次访问share-getShare00-1-会被限流" class="headerlink" title="4.4 多次访问share/getShare00/1 会被限流"></a>4.4 多次访问share/getShare00/1 会被限流</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9020&#x2F;share&#x2F;getShare00&#x2F;1</span><br></pre></td></tr></table></figure>

<p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210323001721433.png" alt="image-20210323001721433"></p>
<h3 id="4-5-多次访问share-getShare01-1-不受影响"><a href="#4-5-多次访问share-getShare01-1-不受影响" class="headerlink" title="4.5 多次访问share/getShare01/1 不受影响"></a>4.5 多次访问share/getShare01/1 不受影响</h3><p><img src="/2021/03/09/8-05-%E6%B5%81%E6%8E%A7%E8%A7%84%E5%88%99/image-20210323001758642.png" alt="image-20210323001758642"></p>
<h2 id="5-Sentinel流控模式"><a href="#5-Sentinel流控模式" class="headerlink" title="5. Sentinel流控模式"></a>5. Sentinel流控模式</h2><h3 id="5-1-流控效果一：-QPS直接失败"><a href="#5-1-流控效果一：-QPS直接失败" class="headerlink" title="5.1 流控效果一： QPS直接失败"></a>5.1 流控效果一： QPS直接失败</h3><ul>
<li>直接抛弃超过阈值的请求</li>
</ul>
<h3 id="5-2-流控效果二：Warm-up"><a href="#5-2-流控效果二：Warm-up" class="headerlink" title="5.2 流控效果二：Warm up"></a>5.2 流控效果二：Warm up</h3><ul>
<li>直接抛弃超过阈值的请求</li>
</ul>
<h3 id="5-3-流控效果三：排队等待"><a href="#5-3-流控效果三：排队等待" class="headerlink" title="5.3 流控效果三：排队等待"></a>5.3 流控效果三：排队等待</h3><ul>
<li>不会抛弃超过阈值的请求。会排队进行</li>
</ul>
<h2 id="6-参考教程"><a href="#6-参考教程" class="headerlink" title="6. 参考教程"></a>6. 参考教程</h2><ul>
<li><a href="https://blog.csdn.net/Weixiaohuai/article/details/108370203">https://blog.csdn.net/Weixiaohuai/article/details/108370203</a></li>
</ul>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-08-系统规则详解【使用、计算规则、源码】</title>
    <url>/2021/03/09/8-08-%E7%B3%BB%E7%BB%9F%E8%A7%84%E5%88%99%E8%AF%A6%E8%A7%A3%E3%80%90%E4%BD%BF%E7%94%A8%E3%80%81%E8%AE%A1%E7%AE%97%E8%A7%84%E5%88%99%E3%80%81%E6%BA%90%E7%A0%81%E3%80%91/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-11-Sentinel与控制台通信原理剖析</title>
    <url>/2021/03/09/8-11-Sentinel%E4%B8%8E%E6%8E%A7%E5%88%B6%E5%8F%B0%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-09-授权规则详解</title>
    <url>/2021/03/09/8-09-%E6%8E%88%E6%9D%83%E8%A7%84%E5%88%99%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-10-代码配置规则</title>
    <url>/2021/03/09/8-10-%E4%BB%A3%E7%A0%81%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-07-热点规则详解【使用、场景、注意点、源码】</title>
    <url>/2021/03/09/8-07-%E7%83%AD%E7%82%B9%E8%A7%84%E5%88%99%E8%AF%A6%E8%A7%A3%E3%80%90%E4%BD%BF%E7%94%A8%E3%80%81%E5%9C%BA%E6%99%AF%E3%80%81%E6%B3%A8%E6%84%8F%E7%82%B9%E3%80%81%E6%BA%90%E7%A0%81%E3%80%91/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-12-控制台相关配置项</title>
    <url>/2021/03/09/8-12-%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E9%A1%B9/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<p><img src="/2021/03/09/8-12-%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E9%A1%B9/image-20210324223829402.png" alt="image-20210324223829402"></p>
<p><img src="/2021/03/09/8-12-%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E9%A1%B9/image-20210324223856131.png" alt="image-20210324223856131"></p>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-13-SentinelAPI详解</title>
    <url>/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="1-测试Spu"><a href="#1-测试Spu" class="headerlink" title="1. 测试Spu"></a>1. 测试Spu</h2><h3 id="1-1-关闭Sentinel对微服务的保护，以便测试"><a href="#1-1-关闭Sentinel对微服务的保护，以便测试" class="headerlink" title="1.1 关闭Sentinel对微服务的保护，以便测试"></a>1.1 关闭Sentinel对微服务的保护，以便测试</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324230522026.png" alt="image-20210324230522026"></p>
<h3 id="1-2-建立TestController"><a href="#1-2-建立TestController" class="headerlink" title="1.2 建立TestController"></a>1.2 建立TestController</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324230703795.png" alt="image-20210324230703795"></p>
<h3 id="1-3-添加请求流控"><a href="#1-3-添加请求流控" class="headerlink" title="1.3. 添加请求流控"></a>1.3. 添加请求流控</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324230842069.png" alt="image-20210324230842069"></p>
<p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324230906065.png" alt="image-20210324230906065"></p>
<h3 id="1-4-查看测试结果"><a href="#1-4-查看测试结果" class="headerlink" title="1.4. 查看测试结果"></a>1.4. 查看测试结果</h3><h4 id="1-4-1-多次请求http-127-0-0-1-9010-test-testSentinelApi-id-1"><a href="#1-4-1-多次请求http-127-0-0-1-9010-test-testSentinelApi-id-1" class="headerlink" title="1.4.1 多次请求http://127.0.0.1:9010/test/testSentinelApi?id=1"></a>1.4.1 多次请求<a href="http://127.0.0.1:9010/test/testSentinelApi?id=1">http://127.0.0.1:9010/test/testSentinelApi?id=1</a></h4><h4 id="1-4-2-查看结果"><a href="#1-4-2-查看结果" class="headerlink" title="1.4.2 查看结果"></a>1.4.2 查看结果</h4><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324231006528.png" alt="image-20210324231006528"></p>
<h2 id="2-测试Tracer"><a href="#2-测试Tracer" class="headerlink" title="2. 测试Tracer"></a>2. 测试Tracer</h2><h3 id="2-1-添加IllegalAccessException异常"><a href="#2-1-添加IllegalAccessException异常" class="headerlink" title="2.1 添加IllegalAccessException异常"></a>2.1 添加IllegalAccessException异常</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324231921868.png" alt="image-20210324231921868"></p>
<h3 id="2-2-测试"><a href="#2-2-测试" class="headerlink" title="2.2 测试"></a>2.2 测试</h3><h4 id="2-2-1-访问"><a href="#2-2-1-访问" class="headerlink" title="2.2.1 访问"></a>2.2.1 访问</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9010&#x2F;test&#x2F;testSentinelApi</span><br></pre></td></tr></table></figure>

<h3 id="2-2-2-查看结果"><a href="#2-2-2-查看结果" class="headerlink" title="2.2.2 查看结果"></a>2.2.2 查看结果</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324232550452.png" alt="image-20210324232550452"></p>
<h3 id="2-3-添加降级规则"><a href="#2-3-添加降级规则" class="headerlink" title="2.3 添加降级规则"></a>2.3 添加降级规则</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324232114226.png" alt="image-20210324232114226"></p>
<p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324232237219.png" alt="image-20210324232237219"></p>
<h3 id="2-4-频繁访问"><a href="#2-4-频繁访问" class="headerlink" title="2.4 频繁访问"></a>2.4 频繁访问</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9010&#x2F;test&#x2F;testSentinelApi?id&#x3D;1</span><br></pre></td></tr></table></figure>

<h3 id="2-5-查看结果"><a href="#2-5-查看结果" class="headerlink" title="2.5 查看结果"></a>2.5 查看结果</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324232316046.png" alt="image-20210324232316046"></p>
<h2 id="3-测试CententUntil"><a href="#3-测试CententUntil" class="headerlink" title="3. 测试CententUntil"></a>3. 测试CententUntil</h2><h3 id="3-1-指定来源"><a href="#3-1-指定来源" class="headerlink" title="3.1 指定来源"></a>3.1 指定来源</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324233420834.png" alt="image-20210324233420834"></p>
<h3 id="3-2-添加流控规则"><a href="#3-2-添加流控规则" class="headerlink" title="3.2 添加流控规则"></a>3.2 添加流控规则</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324233822768.png" alt="image-20210324233822768"></p>
<h3 id="3-3-测试"><a href="#3-3-测试" class="headerlink" title="3.3 测试"></a>3.3 测试</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324233843320.png" alt="image-20210324233843320"></p>
<h3 id="3-4-尝试指定其他来源"><a href="#3-4-尝试指定其他来源" class="headerlink" title="3.4 尝试指定其他来源"></a>3.4 尝试指定其他来源</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324233912655.png" alt="image-20210324233912655"></p>
<h3 id="3-5-测试，未被限流"><a href="#3-5-测试，未被限流" class="headerlink" title="3.5 测试，未被限流"></a>3.5 测试，未被限流</h3><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324233930647.png" alt=" "></p>
<h2 id="4总结Sentinel-API"><a href="#4总结Sentinel-API" class="headerlink" title="## 4总结Sentinel API"></a>## 4总结Sentinel API</h2><h4 id="4-1-API类型"><a href="#4-1-API类型" class="headerlink" title="4.1  API类型"></a>4.1  API类型</h4><p><img src="/2021/03/09/8-13-SentinelAPI%E8%AF%A6%E8%A7%A3/image-20210324234137385.png" alt="image-20210324234137385"></p>
<h3 id="4-2-Sphu作用"><a href="#4-2-Sphu作用" class="headerlink" title="4.2 Sphu作用"></a>4.2 Sphu作用</h3><p>定义监控资源，保护资源</p>
<h3 id="4-2-Tracer-作用"><a href="#4-2-Tracer-作用" class="headerlink" title="4.2 Tracer 作用"></a>4.2 Tracer 作用</h3><p>对指定的异常进行统计</p>
<h3 id="4-3-ContextUtil-作用"><a href="#4-3-ContextUtil-作用" class="headerlink" title="4.3 ContextUtil 作用"></a>4.3 ContextUtil 作用</h3><p>指定来源，标记调用</p>
]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-16-Feign整合Sentinel</title>
    <url>/2021/03/09/8-16-Feign%E6%95%B4%E5%90%88Sentinel/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-14-SentinelResource注解详解</title>
    <url>/2021/03/09/8-14-SentinelResource%E6%B3%A8%E8%A7%A3%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-17-Sentinel使用姿势总结</title>
    <url>/2021/03/09/8-17-Sentinel%E4%BD%BF%E7%94%A8%E5%A7%BF%E5%8A%BF%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-15-RestTemplate整合Sentinel</title>
    <url>/2021/03/09/8-15-RestTemplate%E6%95%B4%E5%90%88Sentinel/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-20-生产环境使用Sentinel</title>
    <url>/2021/03/09/8-20-%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%BD%BF%E7%94%A8Sentinel/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-18-规则持久化-01-拉模式</title>
    <url>/2021/03/09/8-18-%E8%A7%84%E5%88%99%E6%8C%81%E4%B9%85%E5%8C%96-01-%E6%8B%89%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-19-规则持久化-02-推模式</title>
    <url>/2021/03/09/8-19-%E8%A7%84%E5%88%99%E6%8C%81%E4%B9%85%E5%8C%96-02-%E6%8E%A8%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-22-扩展Sentinel-01-错误页优化</title>
    <url>/2021/03/09/8-22-%E6%89%A9%E5%B1%95Sentinel-01-%E9%94%99%E8%AF%AF%E9%A1%B5%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-21-集群流控</title>
    <url>/2021/03/09/8-21-%E9%9B%86%E7%BE%A4%E6%B5%81%E6%8E%A7/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-24-扩展Sentinel-03-RESTfulURL支持</title>
    <url>/2021/03/09/8-24-%E6%89%A9%E5%B1%95Sentinel-03-RESTfulURL%E6%94%AF%E6%8C%81/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-25-扩展Sentinel-04-透过现象看本质</title>
    <url>/2021/03/09/8-25-%E6%89%A9%E5%B1%95Sentinel-04-%E9%80%8F%E8%BF%87%E7%8E%B0%E8%B1%A1%E7%9C%8B%E6%9C%AC%E8%B4%A8/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-26-配置项总结</title>
    <url>/2021/03/09/8-26-%E9%85%8D%E7%BD%AE%E9%A1%B9%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-23-扩展Sentinel-02-实现区分来源</title>
    <url>/2021/03/09/8-23-%E6%89%A9%E5%B1%95Sentinel-02-%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%88%86%E6%9D%A5%E6%BA%90/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>8-27-本章总结：再谈常见容错方案</title>
    <url>/2021/03/09/8-27-%E6%9C%AC%E7%AB%A0%E6%80%BB%E7%BB%93%EF%BC%9A%E5%86%8D%E8%B0%88%E5%B8%B8%E8%A7%81%E5%AE%B9%E9%94%99%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


]]></content>
      <tags>
        <tag>Spring Cloud alibaba 基础学习</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7初始化及基本操作</title>
    <url>/2021/01/14/CentOS7%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%8A%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="改为静态IP"><a href="#改为静态IP" class="headerlink" title="改为静态IP"></a>改为静态IP</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 编辑网卡配置文件</span><br><span class="line">vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 修改相关配置</span><br><span class="line">BOOTPROTO&#x3D;&quot;static&quot; #dhcp改为static </span><br><span class="line">ONBOOT&#x3D;&quot;yes&quot; #开机启用本配置</span><br><span class="line">IPADDR&#x3D;192.168.7.106 #静态IP</span><br><span class="line">GATEWAY&#x3D;192.168.7.1 #默认网关</span><br><span class="line">NETMASK&#x3D;255.255.255.0 #子网掩码</span><br><span class="line">DNS1&#x3D;192.168.7.1 #DNS 配置</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 重启网络服务</span><br><span class="line">service network restart</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 查看IP</span><br><span class="line">ip addr</span><br></pre></td></tr></table></figure>

<h2 id="yum安装wget"><a href="#yum安装wget" class="headerlink" title="yum安装wget"></a>yum安装wget</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum -y install wget</span><br></pre></td></tr></table></figure>



<h2 id="更改yum镜像源"><a href="#更改yum镜像源" class="headerlink" title="更改yum镜像源"></a>更改yum镜像源</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 备份原来的配置</span><br><span class="line">mv &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo.backup</span><br><span class="line"># 下载ailiyun的yum源配置文件到&#x2F;etc&#x2F;yum.repos.d&#x2F;</span><br><span class="line">wget -O &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;repo&#x2F;Centos-7.repo</span><br><span class="line"># 运行yum makecache生成缓存</span><br><span class="line">yum makecache</span><br><span class="line">yum -y update</span><br></pre></td></tr></table></figure>



]]></content>
      <tags>
        <tag>Centos</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker安装Redis</title>
    <url>/2020/12/03/Docker%E5%AE%89%E8%A3%85Redis/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h4 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker pull redis</span><br></pre></td></tr></table></figure>

<h4 id="新建data和conf两个文件夹"><a href="#新建data和conf两个文件夹" class="headerlink" title="新建data和conf两个文件夹"></a>新建<code>data</code>和<code>conf</code>两个文件夹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir -p &#x2F;home&#x2F;docker_data&#x2F;redis&#x2F;data</span><br><span class="line">mkdir -p &#x2F;home&#x2F;docker_data&#x2F;redis&#x2F;conf</span><br></pre></td></tr></table></figure>

<h4 id="增加配置文件-redis-conf"><a href="#增加配置文件-redis-conf" class="headerlink" title="增加配置文件 redis.conf"></a>增加配置文件 <code>redis.conf</code></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 在刚才新建的redis&#x2F;conf中新建文件redis.conf 内容如下：</span><br><span class="line">#bind 127.0.0.1 </span><br><span class="line">protected-mode no </span><br><span class="line">appendonly yes </span><br></pre></td></tr></table></figure>

<h4 id="创建redis容器并启动"><a href="#创建redis容器并启动" class="headerlink" title="创建redis容器并启动"></a>创建<code>redis</code>容器并启动</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run --name redis -p 13913:6379 --privileged&#x3D;true  -v &#x2F;home&#x2F;docker_data&#x2F;redis&#x2F;data:&#x2F;data -v &#x2F;home&#x2F;docker_data&#x2F;redis&#x2F;conf&#x2F;redis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf -d redis redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf</span><br></pre></td></tr></table></figure>

<h4 id="参考教程"><a href="#参考教程" class="headerlink" title="参考教程"></a>参考教程</h4><ul>
<li><a href="https://blog.csdn.net/u010358168/article/details/97143703">https://blog.csdn.net/u010358168/article/details/97143703</a></li>
</ul>
]]></content>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Centos操作命令</title>
    <url>/2020/05/07/Centos%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h4 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">shutdown -r now</span><br></pre></td></tr></table></figure>

<ul>
<li>查看Mysql是否启动(显示PID为启动，不显示为未启动)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pidof mysqld</span><br></pre></td></tr></table></figure>

<h4 id="修改网卡"><a href="#修改网卡" class="headerlink" title="修改网卡"></a>修改网卡</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33</span><br></pre></td></tr></table></figure>

<h4 id="网卡重启"><a href="#网卡重启" class="headerlink" title="网卡重启"></a>网卡重启</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">service network restart</span><br></pre></td></tr></table></figure>

<h4 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">tar -zxvf apache-tomcat-9.0.40.tar.gz</span><br></pre></td></tr></table></figure>

<h4 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 关闭防火墙</span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line"># 暴露端口</span><br><span class="line"># firewall-cmd --permanent --zone&#x3D;public --add-port&#x3D;2048&#x2F;tcp</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">TYPE&#x3D;&quot;Ethernet&quot;</span><br><span class="line">PROXY_METHOD&#x3D;&quot;none&quot;</span><br><span class="line">BROWSER_ONLY&#x3D;&quot;no&quot;</span><br><span class="line"></span><br><span class="line">DEFROUTE&#x3D;&quot;yes&quot;</span><br><span class="line">IPV4_FAILURE_FATAL&#x3D;&quot;no&quot;</span><br><span class="line">IPV6INIT&#x3D;&quot;yes&quot;</span><br><span class="line">IPV6_AUTOCONF&#x3D;&quot;yes&quot;</span><br><span class="line">IPV6_DEFROUTE&#x3D;&quot;yes&quot;</span><br><span class="line">IPV6_FAILURE_FATAL&#x3D;&quot;no&quot;</span><br><span class="line">IPV6_ADDR_GEN_MODE&#x3D;&quot;stable-privacy&quot;</span><br><span class="line">NAME&#x3D;&quot;enp4s0&quot;</span><br><span class="line">UUID&#x3D;&quot;21e599b5-84ab-4a5d-a6f4-18a5adbc4060&quot;</span><br><span class="line">DEVICE&#x3D;&quot;enp4s0&quot;</span><br><span class="line">ONBOOT&#x3D;&quot;yes&quot;</span><br><span class="line"></span><br><span class="line">BOOTPROTO&#x3D;&quot;static&quot;</span><br><span class="line">IPADDR&#x3D;192.168.22.112 #静态IP</span><br><span class="line">GATEWAY&#x3D;192.168.22.1 #默认网关</span><br><span class="line">NETMASK&#x3D;255.255.255.0 #子网掩码</span><br><span class="line">DNS1&#x3D;114.114.114.114 #DNS 配置</span><br><span class="line">DNS2&#x3D;8.8.8.8 #DNS 配置</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="关机"><a href="#关机" class="headerlink" title="关机"></a>关机</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">shutdown -h now</span><br></pre></td></tr></table></figure>

<h4 id="防火墙管理"><a href="#防火墙管理" class="headerlink" title="防火墙管理"></a>防火墙管理</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">systemctl enable firewalld</span><br><span class="line">systemctl start firewalld</span><br><span class="line">systemctl status firewalld</span><br><span class="line"># 开放端口</span><br><span class="line">firewall-cmd --add-port&#x3D;666&#x2F;tcp --permanent</span><br><span class="line"># 重新载入配置</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<h4 id="删除文件夹"><a href="#删除文件夹" class="headerlink" title="删除文件夹"></a>删除文件夹</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rm -rf 文件夹名</span><br></pre></td></tr></table></figure>

<h4 id="查看程序启动状态"><a href="#查看程序启动状态" class="headerlink" title="查看程序启动状态"></a>查看程序启动状态</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ps -ef|grep tomcat</span><br></pre></td></tr></table></figure>



<h2 id="FastDFS"><a href="#FastDFS" class="headerlink" title="FastDFS"></a>FastDFS</h2><h4 id="重新载入配置"><a href="#重新载入配置" class="headerlink" title="重新载入配置"></a>重新载入配置</h4><p> 启动启动tracker服务</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;usr&#x2F;bin&#x2F;fdfs_trackerd &#x2F;etc&#x2F;fdfs&#x2F;tracker.conf start</span><br></pre></td></tr></table></figure>

<h4 id="重新载入配置-1"><a href="#重新载入配置-1" class="headerlink" title="重新载入配置"></a>重新载入配置</h4><p> 启动storage</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;usr&#x2F;bin&#x2F;fdfs_storaged &#x2F;etc&#x2F;fdfs&#x2F;storage.conf start</span><br></pre></td></tr></table></figure>

<h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><h4 id="重新载入配置-2"><a href="#重新载入配置-2" class="headerlink" title="重新载入配置"></a>重新载入配置</h4><p> 启动</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">redis-server.exe redis.windows.conf</span><br></pre></td></tr></table></figure>

<h4 id="重新载入配置-3"><a href="#重新载入配置-3" class="headerlink" title="重新载入配置"></a>重新载入配置</h4><p> 重启</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">systemctl restart redis</span><br></pre></td></tr></table></figure>



<h2 id="Sentinel"><a href="#Sentinel" class="headerlink" title="Sentinel"></a>Sentinel</h2><h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java -Dserver.port&#x3D;8718 -Dcsp.sentinel.dashboard.server&#x3D;localhost:8718 -Dproject.name&#x3D;sentinel-dashboard -jar sentinel-dashboard.jar</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">update user set password&#x3D;password(&#39;root&#39;) where user&#x3D;&#39;root&#39;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;root&#39; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure>

<h2 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a>Mysql</h2><h4 id="重启-1"><a href="#重启-1" class="headerlink" title="重启"></a>重启</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GRANT REPLICATION SLAVE ON *.* TO &#39;repl_user&#39;@&#39;192.168.10.%&#39; IDENTIFIED BY &#39;repl_user&#39;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>

<h4 id="设置简单密码"><a href="#设置简单密码" class="headerlink" title="设置简单密码"></a>设置简单密码</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set global validate_password_policy&#x3D;0;</span><br><span class="line">set global validate_password_length&#x3D;1;</span><br></pre></td></tr></table></figure>

<h2 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h2><h4 id="实时查看日志"><a href="#实时查看日志" class="headerlink" title="实时查看日志"></a>实时查看日志</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">tail -f &#x2F;usr&#x2F;javaweb&#x2F;application&#x2F;apache-tomcat-9.0.39&#x2F;logs&#x2F;catalina.out</span><br></pre></td></tr></table></figure>









]]></content>
      <tags>
        <tag>Centos</tag>
      </tags>
  </entry>
  <entry>
    <title>Git操作</title>
    <url>/2020/11/30/Git%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h4 id="git-pull-push每次都需要输入密码问题"><a href="#git-pull-push每次都需要输入密码问题" class="headerlink" title="git pull/push每次都需要输入密码问题"></a>git pull/push每次都需要输入密码问题</h4>]]></content>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo初始</title>
    <url>/2021/01/14/Hexo%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><ul>
<li><p><a href="https://nodejs.org/en/">Node.js</a>安装</p>
</li>
<li><p><a href="https://git-scm.com/">Git</a>安装</p>
</li>
<li><p>实例GitHub号</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">用户名：ergouzi</span><br><span class="line">账号(注册邮箱): 55252662@qq.com</span><br></pre></td></tr></table></figure>



<h3 id="Hexo安装"><a href="#Hexo安装" class="headerlink" title="Hexo安装"></a>Hexo安装</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line"># 选择一个安装位置进行初始化安装  myhexo为生成的hexo文件夹名称</span><br><span class="line">hexo init myhexo</span><br><span class="line">cd myhexo</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<h3 id="Next安装"><a href="#Next安装" class="headerlink" title="Next安装"></a>Next安装</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd myhexo&#x2F;</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;next-theme&#x2F;hexo-theme-next themes&#x2F;next</span><br></pre></td></tr></table></figure>

<h3 id="使用Next主题"><a href="#使用Next主题" class="headerlink" title="使用Next主题"></a>使用Next主题</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 修改myhexo目录下_config.yml配置</span><br><span class="line">theme: next</span><br></pre></td></tr></table></figure>

<h3 id="配置GitHub"><a href="#配置GitHub" class="headerlink" title="配置GitHub"></a>配置GitHub</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1&gt; 创建GitHub账号</span><br><span class="line">2&gt; 创建GitHub仓库，仓库命名格式固定,不可修改，格式为：GitHub用户名.github.io   例：ergouzi.github.io</span><br></pre></td></tr></table></figure>

<h3 id="Git生成密钥-绑定GitHub"><a href="#Git生成密钥-绑定GitHub" class="headerlink" title="Git生成密钥 绑定GitHub"></a>Git生成密钥 绑定GitHub</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git config --global user.name &quot;你的GitHub用户名&quot;   </span><br><span class="line">git config --global user.email &quot;你的GitHub注册邮箱&quot;</span><br><span class="line"># 生成ssh密钥文件</span><br><span class="line">ssh-keygen -t rsa -C &quot;你的GitHub注册邮箱&quot;</span><br><span class="line"># 打开GitHub_Settings_keys页面[https:&#x2F;&#x2F;link.zhihu.com&#x2F;?target&#x3D;https%3A&#x2F;&#x2F;github.com&#x2F;settings&#x2F;keys] ，新建new SSH Key</span><br></pre></td></tr></table></figure>

<h3 id="保存站点信息"><a href="#保存站点信息" class="headerlink" title="保存站点信息"></a>保存站点信息</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 修改myhexo目录下_config.yml配置</span><br><span class="line">deploy: </span><br><span class="line">  type: &#39;git&#39;</span><br><span class="line">  repo: git@github.com:ergouzi&#x2F;ergouzi.github.io.git</span><br><span class="line">  branch: master</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="安装部署插件"><a href="#安装部署插件" class="headerlink" title="安装部署插件"></a>安装部署插件</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>


<h3 id="访问网址"><a href="#访问网址" class="headerlink" title="访问网址"></a>访问网址</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ergouzi.github.io</span><br></pre></td></tr></table></figure>

<h3 id="设置图片引用"><a href="#设置图片引用" class="headerlink" title="设置图片引用"></a>设置图片引用</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 修改myhexo目录下_config.yml配置 创建新的博客后会生成同名文件夹</span><br><span class="line">post_asset_folder: true</span><br><span class="line"># 下载插件</span><br><span class="line">npm install https:&#x2F;&#x2F;github.com&#x2F;7ym0n&#x2F;hexo-asset-image --sa</span><br><span class="line"># 图片引用格式</span><br><span class="line">![xxx](xxx&#x2F;xxx.png)</span><br></pre></td></tr></table></figure>

<h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 修改myhexo目录下_config.yml配置 改为中文</span><br><span class="line">language: zh-Hans</span><br></pre></td></tr></table></figure>
<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure>



<h2 id="另："><a href="#另：" class="headerlink" title="另："></a>另：</h2><p>​       本文未能细致到傻瓜式操作的程度，有些细节还是要参考其他文章.</p>
<p><strong>教程参考:</strong></p>
<p>​                <a href="https://suyin-blog.club/2020/323EH2Y/">https://suyin-blog.club/2020/323EH2Y/</a></p>
<p>​                <a href="https://zhuanlan.zhihu.com/p/26625249">https://zhuanlan.zhihu.com/p/26625249</a></p>
<p>​                <a href="https://blog.csdn.net/science_Lee/article/details/84633237">https://blog.csdn.net/science_Lee/article/details/84633237</a></p>
]]></content>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>maven依赖手动导入</title>
    <url>/2020/05/20/Maven%E4%BE%9D%E8%B5%96%E6%89%8B%E5%8A%A8%E5%AF%BC%E5%85%A5/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h4 id="1-到https-mvnrepository-com-下载jar包"><a href="#1-到https-mvnrepository-com-下载jar包" class="headerlink" title="1. 到https://mvnrepository.com/下载jar包"></a>1. 到<a href="https://mvnrepository.com/%E4%B8%8B%E8%BD%BDjar%E5%8C%85">https://mvnrepository.com/下载jar包</a></h4><h4 id="2-修改导入命令"><a href="#2-修改导入命令" class="headerlink" title="2. 修改导入命令"></a>2. 修改导入命令</h4><p><img src="/2020/05/20/Maven%E4%BE%9D%E8%B5%96%E6%89%8B%E5%8A%A8%E5%AF%BC%E5%85%A5/%E5%8F%82%E6%95%B0%E5%AF%B9%E7%85%A7.png"></p>
<p><img src="/2020/05/20/Maven%E4%BE%9D%E8%B5%96%E6%89%8B%E5%8A%A8%E5%AF%BC%E5%85%A5/jar%E5%8C%85%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE.png"></p>
<p>F:\spring-boot-admin-starter-client-2.2.3.jar 是你下载后存放的jar包位置</p>
<h4 id="3-最终命令"><a href="#3-最终命令" class="headerlink" title="3. 最终命令"></a>3. 最终命令</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn install:install-file -DgroupId&#x3D;de.codecentric -DartifactId&#x3D;spring-boot-admin-starter-client -Dversion&#x3D;2.2.3 -Dpackaging&#x3D;jar -Dfile&#x3D;F:\spring-boot-admin-starter-client-2.2.3.jar</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn install:install-file -DgroupId&#x3D;mysql -DartifactId&#x3D;mysql-connector-java -Dversion&#x3D;5.1.22 -Dpackaging&#x3D;jar -Dfile&#x3D;E:\mysql-connector-java-5.1.22.jar</span><br></pre></td></tr></table></figure>



]]></content>
  </entry>
  <entry>
    <title>Maven基本使用</title>
    <url>/2020/12/01/Maven%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h4 id="手动安装jar包"><a href="#手动安装jar包" class="headerlink" title="手动安装jar包"></a>手动安装jar包</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn install:install-file -DgroupId&#x3D;de.codecentric -DartifactId&#x3D;spring-boot-admin-starter-client -Dversion&#x3D;2.3.0 -Dpackaging&#x3D;jar -Dfile&#x3D;E:\spring-boot-admin-starter-client-2.3.0.jar</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenWrt主路由基本设置</title>
    <url>/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><ul>
<li>本教程基于eSir的 OpenWrt R21.1.18 GDQ v2.1[2021]版本</li>
</ul>
<h2 id="预实现功能（暂作记录，未能实现）"><a href="#预实现功能（暂作记录，未能实现）" class="headerlink" title="预实现功能（暂作记录，未能实现）"></a>预实现功能（暂作记录，未能实现）</h2><ul>
<li><p>拨号</p>
</li>
<li><p>科学上网</p>
</li>
<li><p>负载均衡</p>
</li>
<li><p>通过动态DNS插件解析OpenWrt主机所分配的IPV6，绑定域名。实现外网访问OpenWrt后台</p>
</li>
<li><p>通过动态DNS插件解析网内主机所分配的IPV6，绑定域名。实现外网控制电脑主机</p>
</li>
</ul>
<h2 id="网络拓扑图"><a href="#网络拓扑图" class="headerlink" title="网络拓扑图"></a>网络拓扑图</h2><p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213184305307.png" alt="image-20210213184305307"></p>
<h2 id="拨号，并对接口进行基本配置（以下每个页面修改完都要点击保存应用，等到最后再点击，前面修改的配置就没了）"><a href="#拨号，并对接口进行基本配置（以下每个页面修改完都要点击保存应用，等到最后再点击，前面修改的配置就没了）" class="headerlink" title="拨号，并对接口进行基本配置（以下每个页面修改完都要点击保存应用，等到最后再点击，前面修改的配置就没了）"></a>拨号，并对接口进行基本配置（以下每个页面修改完都要点击保存应用，等到最后再点击，前面修改的配置就没了）</h2><ol>
<li><p>点击 左侧导航栏 网络 - 接口，删除除了LAN口和WAN口之外的接口</p>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213201625528.png" alt="image-20210213201625528"></p>
</li>
<li><p>点击WAN口修改按钮</p>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213201745239.png" alt="image-20210213201745239"></p>
</li>
<li><p>WAN口：基本配置改为如下设置，PAP/CHAP 用户名，密码改为自己的宽带账号密码</p>
</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213202231140.png" alt="image-20210213202231140"></p>
<ol start="4">
<li><p>WAN口：高级设置改为如下设置</p>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213202438292.png" alt="image-20210213202438292"></p>
</li>
<li><p>WAN口：物理设置改为如下设置，因为我的连接光猫的网线是连接在软路由的eth0口的。</p>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213202803464.png" alt="image-20210213202803464"></p>
</li>
<li><p>WAN口：防火墙设置改为如下设置</p>
</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213202945238.png" alt="image-20210213202945238"></p>
<ol start="7">
<li>点击保存&amp;应用。并返回接口页面</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213203140282.png" alt="image-20210213203140282"></p>
<ol start="8">
<li>点击LAN口修改按钮</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213203304066.png" alt="image-20210213203304066"></p>
<ol start="9">
<li>LAN口：基本设置，以及DHCP 服务器基本设置改为如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213203732334.png" alt="image-20210213203732334"></p>
<ol start="10">
<li>LAN口：DHCP 服务器高级设置改为如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213203558722.png" alt="image-20210213203558722"></p>
<ol start="11">
<li>LAN口：DHCP 服务器IPV6设置改为如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213203857231.png" alt="image-20210213203857231"></p>
<ol start="12">
<li>LAN口：高级配置改为如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213204015391.png" alt="image-20210213204015391"></p>
<ol start="13">
<li>LAN口：物理设置改为如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213204103729.png" alt="image-20210213204103729"></p>
<ol start="14">
<li>LAN口：防火墙设置改为如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213204218445.png" alt="image-20210213204218445"></p>
<ol start="15">
<li>点击保存&amp; 应用，并点击接口，返回接口管理界面，查看信息</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213204429554.png" alt="image-20210213204429554"></p>
<h2 id="科学上网"><a href="#科学上网" class="headerlink" title="科学上网"></a>科学上网</h2><ol>
<li>点击 服务 - shadowSocksR Plus+</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213210211443.png" alt="image-20210213210211443"></p>
<ol start="2">
<li><p>做如下配置</p>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213210510736.png" alt="image-20210213210510736"></p>
<ol start="3">
<li>选一个状态好的节点，点击应用</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213210820407.png" alt="image-20210213210820407"></p>
<ol start="4">
<li>结果如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213210845470.png" alt="image-20210213210845470"></p>
</li>
</ol>
<h2 id="配置负载均衡"><a href="#配置负载均衡" class="headerlink" title="配置负载均衡"></a>配置负载均衡</h2><ol>
<li>点击 网络 - 负载均衡</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213204546068.png" alt="image-20210213204546068"></p>
<ol start="2">
<li>点击修改</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213204634126.png" alt="image-20210213204634126"></p>
<ol start="3">
<li>点击策略，点击修改</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213204822723.png" alt="image-20210213204822723"></p>
<ol start="4">
<li>备用成员改为默认（使用主路由表），保存应用</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213204923549.png" alt="image-20210213204923549"></p>
<ol start="5">
<li>结果如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213205551262.png" alt="image-20210213205551262"></p>
<ol start="6">
<li>点击规则，点击修改</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213205054633.png" alt="image-20210213205054633"></p>
<ol start="7">
<li>分配的策略改为默认（使用主路由表），保存应用，返回上一级</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213205140917.png" alt="image-20210213205140917"></p>
<ol start="8">
<li>点击修改</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213205246760.png" alt="image-20210213205246760"></p>
<ol start="8">
<li>分配的策略改为默认（使用主路由表），保存应用</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213205309462.png" alt="image-20210213205309462"></p>
<ol start="9">
<li><p>结果如下</p>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213205411379.png" alt="image-20210213205411379"></p>
</li>
</ol>
<h2 id="配置Turbo-ACC网络加速"><a href="#配置Turbo-ACC网络加速" class="headerlink" title="配置Turbo ACC网络加速"></a>配置Turbo ACC网络加速</h2><ol>
<li>点击 网络 - Turbo ACC网络加速</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213205908299.png" alt="image-20210213205908299"></p>
<ol start="2">
<li>修改如下配置</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213210013806.png" alt="image-20210213210013806"></p>
<ol start="3">
<li>结果如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213210052524.png" alt="image-20210213210052524"></p>
<h2 id="配置动态DNS，实现外网访问该系统（具体域名购买，另行百度）"><a href="#配置动态DNS，实现外网访问该系统（具体域名购买，另行百度）" class="headerlink" title="配置动态DNS，实现外网访问该系统（具体域名购买，另行百度）"></a>配置动态DNS，实现外网访问该系统（具体域名购买，另行百度）</h2><ol>
<li>点击动态DNS插件。删除原有配置</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213211415625.png" alt="image-20210213211415625"></p>
<ol start="2">
<li>自定义名称，点击添加</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213211522200.png" alt="image-20210213211522200"></p>
<ol start="2">
<li>基本配置如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213211954679.png" alt="image-20210213211954679"></p>
<ol start="3">
<li>高级设置如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213212137577.png" alt="image-20210213212137577"></p>
<ol start="4">
<li>保存应用。点击启动</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213212225740.png" alt="image-20210213212225740"></p>
<ol start="5">
<li>结果如下</li>
</ol>
<p><img src="/2021/02/13/OpenWrt%E4%B8%BB%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/image-20210213212304485.png" alt="image-20210213212304485"></p>
]]></content>
  </entry>
  <entry>
    <title>Mysql-基本操作</title>
    <url>/2020/12/02/Mysql-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h4 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set password for root@localhost &#x3D; password(&quot;123456&quot;); </span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker安装Jenkins实现自动部署</title>
    <url>/2020/11/28/docker%E5%AE%89%E8%A3%85Jenkins%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>


<h2 id="Jenkins安装"><a href="#Jenkins安装" class="headerlink" title="Jenkins安装"></a>Jenkins安装</h2><ol>
<li>拉取镜像</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker pull jenkinsci&#x2F;blueocean</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>查看镜像</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>创建容器</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run -d  \</span><br><span class="line">--name jenkins -u root \</span><br><span class="line">-p 13912:8080  \</span><br><span class="line">--privileged&#x3D;true \</span><br><span class="line">-v &#x2F;home&#x2F;docker_data&#x2F;jenkins&#x2F;jenkins_home:&#x2F;var&#x2F;jenkins_home  \</span><br><span class="line">jenkinsci&#x2F;blueocean</span><br></pre></td></tr></table></figure>



<h2 id="Jenkins初始化"><a href="#Jenkins初始化" class="headerlink" title="Jenkins初始化"></a>Jenkins初始化</h2><ol>
<li>以root权限进入docker容器Jenkins</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 查看容器的CONTAINER ID</span><br><span class="line">sudo docker container ls</span><br><span class="line"># 8b96bbb88d0a 为上面查到的CONTAINER ID</span><br><span class="line">sudo docker exec -ti -u root 8b96bbb88d0a bash</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>容器内修改alpine镜像源为阿里云</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sed -i &#39;s&#x2F;dl-cdn.alpinelinux.org&#x2F;mirrors.aliyun.com&#x2F;g&#39; &#x2F;etc&#x2F;apk&#x2F;repositories</span><br><span class="line">apk update</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>容器内安装maven</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apk add maven</span><br><span class="line">apk add ansible</span><br><span class="line">apk add ansible-doc</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>查看maven和jdk安装位置</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apk info -L maven  </span><br><span class="line">例：&#x2F;usr&#x2F;share&#x2F;java&#x2F;maven-3</span><br><span class="line"></span><br><span class="line">echo $JAVA_HOME</span><br><span class="line">例：&#x2F;opt&#x2F;java&#x2F;openjdk</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>查看Jenkins初始化密码</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">find  &#x2F; -name initialAdminPassword |xargs ls -l</span><br><span class="line"># 查到路径为&#x2F;var&#x2F;jenkins_home&#x2F;secrets&#x2F;initialAdminPassword</span><br><span class="line">cat  &#x2F;var&#x2F;jenkins_home&#x2F;secrets&#x2F;initialAdminPassword</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><p>访问http://宿主机IP:13912 用上面查到的密码初始化</p>
</li>
<li><p>汉化</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 安装locale plugin，Localization:Chinese(Simplified)这两个插件。</span><br><span class="line">2. 系统管理–&gt;系统设置–&gt;Locale 填入：zh_CN</span><br></pre></td></tr></table></figure>

<h2 id="Jenkins全局配置"><a href="#Jenkins全局配置" class="headerlink" title="Jenkins全局配置"></a>Jenkins全局配置</h2><ol>
<li>Maven配置</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">默认settings提供：Settings file in filesystem</span><br><span class="line"># 找上面步骤查到的Maven路径</span><br><span class="line">文件路径：&#x2F;usr&#x2F;share&#x2F;java&#x2F;maven-3&#x2F;conf&#x2F;settings.xml</span><br><span class="line"></span><br><span class="line">默认全局settings提供：Global settings file on filesystem</span><br><span class="line"># 找上面步骤查到的Maven路径</span><br><span class="line">文件路径：&#x2F;usr&#x2F;share&#x2F;java&#x2F;maven-3&#x2F;conf&#x2F;settings.xml默认全局settings提供：Global settings file on filesystem</span><br><span class="line"># 找上面步骤查到的Maven路径</span><br><span class="line">文件路径：&#x2F;usr&#x2F;share&#x2F;java&#x2F;maven-3&#x2F;conf&#x2F;settings.xml</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>JDK配置</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">取消Install automatically</span><br><span class="line">JDK别名：jdk</span><br><span class="line"># 找上面步骤查到的JDK路径</span><br><span class="line">JAVA_HOME：&#x2F;opt&#x2F;java&#x2F;openjdk</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>MAVEN安装(与上面不同)</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">NAME：maven</span><br><span class="line">MAVEN_HOME：&#x2F;usr&#x2F;share&#x2F;java&#x2F;maven-3</span><br></pre></td></tr></table></figure>

<h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><ol>
<li><p>安装Subversion Plugin</p>
</li>
<li><p>安装Maven Integration plugin</p>
</li>
</ol>
<h2 id="远程Tomcat配置"><a href="#远程Tomcat配置" class="headerlink" title="远程Tomcat配置"></a>远程Tomcat配置</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># &#x2F;home&#x2F;application&#x2F;apache-tomcat-9.0.40&#x2F;webapps&#x2F;host-manager&#x2F;META-INF&#x2F;context.xml 和 &#x2F;home&#x2F;application&#x2F;apache-tomcat-9.0.40&#x2F;webapps&#x2F;manager&#x2F;META-INF&#x2F;context.xml注释掉以下代码</span><br><span class="line"></span><br><span class="line">&lt;Valve className&#x3D;&quot;org.apache.catalina.valves.RemoteAddrValve&quot;</span><br><span class="line">         allow&#x3D;&quot;127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line"># &#x2F;home&#x2F;application&#x2F;apache-tomcat-9.0.40&#x2F;conf&#x2F;tomcat-users.xml 添加以下代码</span><br><span class="line">&lt;role rolename&#x3D;&quot;admin-gui&quot;&#x2F;&gt;</span><br><span class="line">&lt;role rolename&#x3D;&quot;manager-gui&quot;&#x2F;&gt;</span><br><span class="line">&lt;role rolename&#x3D;&quot;manager-script&quot;&#x2F;&gt;</span><br><span class="line">&lt;user username&#x3D;&quot;manager&quot; password&#x3D;&quot;manager&quot; roles&#x3D;&quot;manager-gui,manager-script&quot;&#x2F;&gt;</span><br><span class="line">&lt;user username&#x3D;&quot;admin&quot; password&#x3D;&quot;admin&quot; roles&#x3D;&quot;admin-gui,manager-gui,manager-script&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>

<h2 id="新建Maven项目"><a href="#新建Maven项目" class="headerlink" title="新建Maven项目"></a>新建Maven项目</h2><ol>
<li>源码管理 配置Subversion</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Repository URL：你的项目在SVN服务器上的路径</span><br><span class="line">Credentials：你的SVN账号密码</span><br><span class="line"># 其他的保持默认</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Build</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Root POM：pom.xml</span><br><span class="line">Goals and options：clean install</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>构建后操作</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 选择Deploy war&#x2F;ear to a container</span><br><span class="line">WAR&#x2F;EAR files：target\jenkinsTest-1.0-SNAPSHOT.war</span><br><span class="line"># 打包到tomcat生成的文件名</span><br><span class="line">Context path：jenkinsTest</span><br><span class="line">Containers：Tomcat 9.x Remote</span><br><span class="line">Credentials: 账号admin 密码admin(上面Tomcat配置)</span><br><span class="line"># Tomcat所在服务器IP:项目访问端口号# Tomcat所在服务器IP:项目访问端口号</span><br><span class="line">Tomcat URL: http:&#x2F;&#x2F;192.168.2.10:&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="保存配置，点击立即构建"><a href="#保存配置，点击立即构建" class="headerlink" title="保存配置，点击立即构建"></a>保存配置，点击立即构建</h2><h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><p><a href="https://blog.csdn.net/u012763794/article/details/80943472">https://blog.csdn.net/u012763794/article/details/80943472</a></p>
<p><a href="http://www.eryajf.net/701.html">http://www.eryajf.net/701.html</a></p>
<p><a href="https://cloud.tencent.com/developer/article/1461397">https://cloud.tencent.com/developer/article/1461397</a></p>
]]></content>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>多线程初识</title>
    <url>/2020/12/09/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%88%9D%E8%AF%86/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><p>造成死锁原因：线程Add拿到线程Del所需B锁 线程Del拿到线程Add所需A锁 </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class Test03  &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private static Object lockA &#x3D; new Object();</span><br><span class="line">    private static Object lockB &#x3D; new Object();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static class  Add extends Thread &#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            synchronized(lockA) &#123;</span><br><span class="line"></span><br><span class="line">                System.err.println(&quot;add获取A锁&quot;);</span><br><span class="line">                try &#123;</span><br><span class="line">                    Thread.sleep(5000);</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                synchronized(lockB) &#123;</span><br><span class="line"></span><br><span class="line">                    System.err.println(&quot;add获取B锁&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class Del extends Thread  &#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line"></span><br><span class="line">            synchronized(lockB) &#123;</span><br><span class="line"></span><br><span class="line">                System.err.println(&quot;del获取B锁&quot;);</span><br><span class="line">                synchronized(lockA) &#123;</span><br><span class="line"></span><br><span class="line">                    System.err.println(&quot;del获取A锁&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        Add add &#x3D; new Add();</span><br><span class="line">        add.start();</span><br><span class="line"></span><br><span class="line">        Del del &#x3D; new Del();</span><br><span class="line">        del.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
  </entry>
  <entry>
    <title>快住脑，跟我动--Mysql优化</title>
    <url>/2020/12/04/%E5%BF%AB%E4%BD%8F%E8%84%91%EF%BC%8C%E8%B7%9F%E6%88%91%E5%8A%A8-Mysql%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>
]]></content>
      <tags>
        <tag>快住脑，跟我动系列</tag>
      </tags>
  </entry>
  <entry>
    <title>读《Java多线程编程实战指南》--线程状态</title>
    <url>/2020/12/04/%E8%AF%BB%E3%80%8AJava%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97%E3%80%8B--%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81/</url>
    <content><![CDATA[<p>暂无说明</p>
<a id="more"></a>

<h4 id="线程状态类型"><a href="#线程状态类型" class="headerlink" title="线程状态类型"></a>线程状态类型</h4><ul>
<li>NEW：线程已经创建，待启动</li>
<li>RUNNABLE：</li>
</ul>
]]></content>
      <tags>
        <tag>读《Java多线程编程实战指南》</tag>
      </tags>
  </entry>
</search>
